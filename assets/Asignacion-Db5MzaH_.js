import{j as e,a as U,r as o,S as j,c as k,A as P,d as H}from"./index-bvBplxLg.js";import{i as V,A as z,n as J,H as I,v as q,I as Y}from"./index-CU0cwZ_L.js";import{P as G}from"./PageTransition-h2g6dWVb.js";import"./iconBase-BtrJDtBd.js";const K=({mensaje:g,onClose:x})=>{if(!g)return null;const d=`alert alert-${g.tipo} alert-dismissible fade show`;return e.jsxs("div",{className:d,role:"alert",children:[g.texto,e.jsx("button",{type:"button",className:"btn-close",onClick:x,"aria-label":"Close"})]})},Q=()=>{const g=U();return e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsxs("h2",{className:"text-dark mb-0",children:[e.jsx(V,{className:"me-2"})," Asignacion"]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs("button",{className:"btn btn-outline-orange btn-sm d-inline-flex align-items-center justify-content-center gap-2 fw-semibold",onClick:()=>g("/estudiantes"),children:[e.jsx(z,{})," ",e.jsx("span",{children:"Estudiantes"})]}),e.jsxs("button",{className:"btn btn-outline-orange btn-sm d-inline-flex align-items-center justify-content-center gap-2 fw-semibold",onClick:()=>g("/dashboard"),children:[e.jsx(J,{})," ",e.jsx("span",{children:"Volver"})]})]})]})},W=({aperturas:g,selectedApertura:x,onAperturaChange:d,getSelectedAperturaDetails:p})=>{const h=g.filter((m,w,A)=>A.findIndex(c=>c.titulo===m.titulo&&c.periodo_nombre===m.periodo_nombre)===w);return e.jsx("div",{className:"col-12 col-md-6",children:e.jsx("div",{className:"card shadow-sm border",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"mb-3",children:"Seleccionar Cuestionario"}),h.length===0?e.jsx("p",{className:"text-muted text-center mb-0",children:"Sin cuestionarios."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"apertura_id",className:"form-label",children:"Cuestionario:"}),e.jsxs("select",{id:"apertura_id",className:"form-select",value:x,onChange:m=>d(m.target.value),required:!0,children:[e.jsx("option",{value:"",children:"-- Seleccione --"}),h.map(m=>e.jsxs("option",{value:m.id,children:[m.titulo," (",m.periodo_nombre,")"]},m.id))]})]}),e.jsx("div",{children:p()?e.jsxs("div",{className:"alert alert-info mb-0",children:[e.jsx("strong",{children:p()?.titulo}),e.jsxs("p",{className:"mb-0 mt-1",children:[p()?.periodo_nombre," - ",p()?.programa_nombre]})]}):e.jsx("p",{className:"text-muted text-center mb-0",children:"Seleccione cuestionario."})})]})]})})})},X=({estudiantes:g,selectedEstudiantes:x,filtroEstudiante:d,seleccionarTodos:p,onFiltroChange:h,onToggleSeleccionarTodos:m,onEstudianteCheckboxChange:w,filteredEstudiantes:A})=>e.jsx("div",{className:"col-12 col-md-6",children:e.jsx("div",{className:"card shadow-sm border",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"mb-3",children:"Seleccionar Estudiantes"}),e.jsx("div",{children:g.length===0?e.jsxs("div",{className:"alert alert-warning",children:[e.jsx("p",{className:"mb-1",children:"Sin estudiantes."}),e.jsx("p",{className:"mb-0",children:"Importe estudiantes."})]}):e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Estudiantes:"}),e.jsxs("div",{className:"d-flex gap-2 mb-2",children:[e.jsx("input",{id:"estudiante_nombre",type:"text",placeholder:"Buscar...",className:"form-control",value:d,onChange:c=>h(c.target.value)}),e.jsx("button",{type:"button",className:"btn btn-outline-orange w-30 d-inline-flex align-items-center justify-content-center gap-2 fw-semibold py-2",onClick:m,children:e.jsx("span",{children:p?"Ninguno":"Todos"})})]}),e.jsx("div",{className:"border rounded p-3",style:{maxHeight:"200px",overflowY:"auto"},children:A.map(c=>e.jsxs("div",{className:"form-check",children:[e.jsx("input",{type:"checkbox",id:`estudiante_${c.id}`,checked:x.includes(c.id),onChange:()=>w(c.id),className:"form-check-input"}),e.jsx("label",{htmlFor:`estudiante_${c.id}`,className:"form-check-label",children:(()=>{const y=Array.isArray(c.programas)&&c.programas.length?c.programas.map(N=>N.nombre).join(", "):"";return y?`${c.nombre} - ${y}`:c.nombre})()})]},c.id))})]})})]})})}),Z=()=>e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-muted",children:"Sin asignaciones."})}),ee=({asignaciones:g,onEliminarAsignacion:x})=>{const d=g,[p,h]=o.useState(""),[m,w]=o.useState(""),[A,c]=o.useState(""),y=o.useMemo(()=>Array.from(new Set(d.map(r=>r.cuestionario_titulo))).sort((r,i)=>r.localeCompare(i,"es",{sensitivity:"base"})),[d]),N=o.useMemo(()=>Array.from(new Set(d.map(r=>r.periodo_nombre))).sort((r,i)=>r.localeCompare(i,"es",{sensitivity:"base"})),[d]),_=o.useMemo(()=>d.filter(i=>{const f=!p||i.cuestionario_titulo===p,E=!m||i.periodo_nombre===m,v=A.trim().toLowerCase(),C=!v||i.estudiante_nombre.toLowerCase().includes(v)||i.email.toLowerCase().includes(v);return f&&E&&C}).sort((i,f)=>i.estudiante_nombre.localeCompare(f.estudiante_nombre,"es",{sensitivity:"base"})),[d,p,m,A]);return e.jsx("div",{className:"card shadow-sm border",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2 mb-3",children:[e.jsx("h5",{className:"mb-0",children:"Asignaciones"}),e.jsxs("div",{className:"d-flex flex-column flex-sm-row gap-2",children:[e.jsxs("div",{className:"position-relative",children:[e.jsx("input",{type:"text",className:"form-control pe-5",placeholder:"Buscar estudiante o email",value:A,onChange:r=>c(r.target.value)}),e.jsx("i",{className:"fas fa-search position-absolute text-secondary",style:{right:10,top:"50%",transform:"translateY(-50%)"}})]}),e.jsxs("select",{className:"form-select w-25",value:p,onChange:r=>h(r.target.value),children:[e.jsx("option",{value:"",children:"Todos los cuestionarios"}),y.map((r,i)=>e.jsx("option",{value:r,children:r},i))]}),e.jsxs("select",{className:"form-select w-25",value:m,onChange:r=>w(r.target.value),children:[e.jsx("option",{value:"",children:"Todos los periodos"}),N.map((r,i)=>e.jsx("option",{value:r,children:r},i))]})]})]}),d.length===0?e.jsx(Z,{}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-borderless mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border-0 px-3 py-3 text-center",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-center",children:[e.jsx("i",{className:"fas fa-user me-2"}),"Estudiante"]})}),e.jsx("th",{className:"border-0 px-3 py-3 text-center",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-center",children:[e.jsx("i",{className:"fas fa-envelope me-2"}),"Email"]})}),e.jsx("th",{className:"border-0 px-3 py-3 text-center",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-center",children:[e.jsx("i",{className:"fas fa-file-alt me-2"}),"Cuestionario"]})}),e.jsx("th",{className:"border-0 px-3 py-3 text-center",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-center",children:[e.jsx("i",{className:"fas fa-calendar me-2"}),"Periodo"]})}),e.jsx("th",{className:"border-0 px-3 py-3 text-center",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-center",children:[e.jsx("i",{className:"fas fa-cogs me-2"}),"Acciones"]})})]})}),e.jsx("tbody",{children:_.map(r=>e.jsxs("tr",{className:"border-bottom",children:[e.jsx("td",{className:"px-3 py-3 text-center",children:e.jsx("span",{className:"text-dark",children:r.estudiante_nombre})}),e.jsx("td",{className:"px-3 py-3 text-center",children:e.jsx("span",{className:"text-dark",children:r.email})}),e.jsx("td",{className:"px-3 py-3 text-center",children:e.jsx("span",{className:"text-dark",children:r.cuestionario_titulo})}),e.jsx("td",{className:"px-3 py-3 text-center",children:e.jsx("span",{className:"text-dark",children:r.periodo_nombre})}),e.jsx("td",{className:"px-3 py-3 text-center",children:e.jsx("button",{className:"btn btn-outline-danger btn-sm d-inline-flex align-items-center justify-content-center gap-2 fw-semibold",onClick:()=>x(r.id),title:"Eliminar",children:e.jsx("i",{className:"fas fa-trash"})})})]},r.id))})]})})]})})},ae=({onRecargarDatos:g,asignaciones:x})=>{const[d,p]=o.useState([]),[h,m]=o.useState(""),[w,A]=o.useState(""),[c,y]=o.useState(!1),[N,_]=o.useState(!1),r=typeof window<"u"?localStorage.getItem("usuario"):null,i=r?JSON.parse(r):null,f=Number(i?.programa_id)===99;o.useEffect(()=>{E()},[x]);const E=()=>{try{const a=new Map;x.forEach(l=>{const u=l.programa_nombre||"Sin programa";a.has(u)||a.set(u,[]),a.get(u)?.push(l)});const t=Array.from(a.entries()).map(([l,u])=>({programa_nombre:l,asignaciones:u,total_asignaciones:u.length}));p(t),f||(t.length===1?(m(t[0].programa_nombre),y(!0)):y(!1))}catch(a){console.error("Error al procesar programas:",a),p([])}},v=async()=>{if(!h){j.fire({icon:"warning",title:"Atención",text:"Debe seleccionar un programa"});return}const a=d.find(l=>l.programa_nombre===h);if(!a)return;(await j.fire({title:"¿Está completamente seguro?",html:`
        <p>Esta acción eliminará <strong>TODAS</strong> las asignaciones del programa:</p>
        <p><strong>"${a.programa_nombre}"</strong></p>
        <p>Total de asignaciones a eliminar: <span style="color: red; font-weight: bold;">${a.total_asignaciones}</span></p>
        <br>
        <p style="color: red;"><strong>⚠️ Esta acción NO se puede deshacer</strong></p>
      `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar TODAS",cancelButtonText:"Cancelar",input:"checkbox",inputPlaceholder:"Confirmo que entiendo que esta acción es irreversible",inputValidator:l=>!l&&"Debe confirmar que entiende las consecuencias"})).isConfirmed&&await C(a)},C=async a=>{try{_(!0);const t=i?.id||"";let l=0,u=0;for(const T of a.asignaciones)try{const n=await k.delete(P.asignacion.eliminar(T.id),{params:{usuario_id:t}});n?.data?.success?l++:(u++,console.error("Error en respuesta:",n?.data?.message||n?.data?.error))}catch(n){u++,console.error("Error al eliminar asignación individual:",n?.response?.data?.message||n?.message)}l>0?(await j.fire({icon:u>0?"warning":"success",title:u>0?"Eliminación parcial":"¡Eliminación completada!",html:`
            <p>Se eliminaron <strong>${l}</strong> asignaciones</p>
            <p>del programa: <strong>"${a.programa_nombre}"</strong></p>
            ${u>0?`<p style="color: orange;">Errores: ${u}</p>`:""}
          `,timer:3e3,showConfirmButton:!1}),m(""),g()):await j.fire({icon:"error",title:"Error",text:"No se pudieron eliminar las asignaciones"})}catch(t){console.error("Error general:",t),j.fire({icon:"error",title:"Error",text:t instanceof Error?t.message:"Error al eliminar asignaciones"})}finally{_(!1)}},S=async()=>{if(!w){j.fire({icon:"warning",title:"Atención",text:"Debe seleccionar una asignación"});return}const a=x.find(l=>String(l.id)===w);if(!a)return;(await j.fire({title:"¿Está completamente seguro?",html:`
        <p>Esta acción eliminará la asignación:</p>
        <p><strong>"${a.programa_nombre} - ${a.cuestionario_titulo||a.titulo||a.nombre||a.cuestionario_nombre||`Asignación ${a.id}`}"</strong></p>
        <br>
        <p style="color: red;"><strong>⚠️ Esta acción NO se puede deshacer</strong></p>
      `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar",input:"checkbox",inputPlaceholder:"Confirmo que entiendo que esta acción es irreversible",inputValidator:l=>!l&&"Debe confirmar que entiende las consecuencias"})).isConfirmed&&await B(a)},B=async a=>{try{_(!0);const t=i?.id||"";try{(await k.delete(P.asignacion.eliminar(a.id),{params:{usuario_id:t}}))?.data?.success?(await j.fire({icon:"success",title:"¡Eliminación completada!",html:`
              <p>Se eliminó la asignación:</p>
              <p><strong>"${a.programa_nombre} - ${a.cuestionario_titulo||a.titulo||a.nombre||a.cuestionario_nombre||`Asignación ${a.id}`}"</strong></p>
            `,timer:3e3,showConfirmButton:!1}),A(""),g()):await j.fire({icon:"error",title:"Error",text:"No se pudo eliminar la asignación"})}catch(l){await j.fire({icon:"error",title:"Error",text:l?.response?.data?.message||l?.message})}}catch(t){console.error("Error general:",t),j.fire({icon:"error",title:"Error",text:t instanceof Error?t.message:"Error al eliminar asignación"})}finally{_(!1)}};return d.length===0?e.jsx("div",{className:"card shadow-sm border",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"mb-3",children:[e.jsx(I,{className:"me-2"})," Eliminar Asignaciones por Programa"]}),e.jsxs("div",{className:"alert alert-info",children:[e.jsx(q,{className:"me-2"})," No hay programas con asignaciones activas."]})]})}):e.jsx("div",{className:"card shadow-sm border",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"mb-3",children:[e.jsx(I,{className:"me-2"})," Eliminar Asignaciones por Programa"]}),e.jsxs("div",{className:"alert alert-warning",children:[e.jsx(q,{className:"me-2"}),e.jsx("strong",{children:"¡ATENCIÓN!"})," Esta acción eliminará TODAS las asignaciones del programa seleccionado."]}),e.jsx("div",{className:"row g-12",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"programa_eliminar",className:"form-label fw-bold",style:{color:"#1e293b"},children:f?"Seleccione una asignación actual para eliminar:":"Seleccione el programa para eliminar todas sus asignaciones:"}),e.jsx("div",{className:"d-flex flex-column flex-md-row align-items-stretch align-items-md-center gap-2 w-100",children:f?e.jsxs(e.Fragment,{children:[e.jsxs("select",{style:{width:"100%"},id:"asignacion_eliminar",className:"form-select flex-grow-1",value:w,onChange:a=>A(a.target.value),disabled:N,children:[e.jsx("option",{value:"",children:"-- Seleccione una asignación --"}),x.map((a,t)=>{const l=a.programa_nombre||"Sin programa",u=a.cuestionario_titulo||a.titulo||a.nombre||a.cuestionario_nombre||`Asignación ${a.id}`;return e.jsxs("option",{value:String(a.id),children:[l," - ",u," (ID: ",a.id,")"]},t)})]}),e.jsx("div",{className:"d-grid d-md-inline-flex",children:e.jsx("button",{type:"button",className:"btn btn-outline-danger w-100 d-inline-flex align-items-center justify-content-center gap-2 fw-semibold",onClick:S,disabled:!w||N,children:N?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm"}),e.jsx("span",{children:"Eliminando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{}),e.jsx("span",{children:"Eliminar Seleccionada"})]})})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("select",{style:{width:"100%"},id:"programa_eliminar",className:"form-select flex-grow-1",value:h,onChange:a=>m(a.target.value),disabled:N||c,children:[!c&&e.jsx("option",{value:"",children:"-- Seleccione un programa --"}),d.map((a,t)=>e.jsxs("option",{value:a.programa_nombre,children:[a.programa_nombre," (",a.total_asignaciones," asignaciones)"]},t))]}),e.jsx("div",{className:"d-grid d-md-inline-flex",children:e.jsx("button",{type:"button",className:"btn btn-outline-danger w-100 d-inline-flex align-items-center justify-content-center gap-2 fw-semibold",onClick:v,disabled:!h||N,children:N?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm"}),e.jsx("span",{children:"Eliminando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{}),e.jsx("span",{children:"Eliminar Todas"})]})})})]})})]})})}),h&&e.jsxs("div",{className:"alert alert-warning mt-3",children:[e.jsx("strong",{children:"Resumen de la acción:"}),e.jsxs("ul",{className:"mb-0 mt-2",children:[e.jsxs("li",{children:["Programa: ",e.jsx("strong",{children:d.find(a=>a.programa_nombre===h)?.programa_nombre})]}),e.jsxs("li",{children:["Asignaciones a eliminar: ",e.jsx("strong",{children:d.find(a=>a.programa_nombre===h)?.total_asignaciones})]}),e.jsx("li",{children:e.jsxs("strong",{children:[e.jsx(q,{})," Esta acción NO se puede deshacer"]})})]})]})]})})},se=()=>{const g=o.useContext(H),[x,d]=o.useState([]),[p,h]=o.useState([]),[m,w]=o.useState([]),[A,c]=o.useState(!1),y=o.useMemo(()=>g?.user?.id,[g?.user?.id]),N=o.useCallback(async()=>{try{c(!0);const[f,E,v,C]=await Promise.all([k.get(P.cuestionario.abiertos).catch(s=>(console.error("Error al obtener cuestionarios abiertos:",s),{data:[]})),k.get(P.estudiante.base).catch(s=>{if(s?.response?.status===404)return{data:{estudiantes:[]}};throw s}),k.get(P.asignacion.obtener(y||"me")),k.get(P.programas.base).catch(()=>({data:[]}))]),S=f?.data,a=(Array.isArray(S)?S:Array.isArray(S?.cuestionarios_abiertos)?S.cuestionarios_abiertos:Array.isArray(S?.abiertos)?S.abiertos:Array.isArray(S?.data?.cuestionarios_abiertos)?S.data.cuestionarios_abiertos:Array.isArray(S?.data)?S.data:[]).map(s=>({id:Number(s.apertura_id??s.id??s.cuestionario_id??0),titulo:String(s.titulo??s.cuestionario_titulo??"Cuestionario"),descripcion:String(s.descripcion??s.cuestionario_descripcion??""),periodo_nombre:String(s.periodo_nombre??s.periodo??"No especificado"),fecha_inicio:String(s.fecha_inicio??s.inicio??""),fecha_fin:String(s.fecha_fin??s.fin??""),programa_nombre:String(s.programa_nombre??s.programa??"No especificado")}));let t=Array.isArray(E?.data?.estudiantes)?E?.data?.estudiantes:Array.isArray(E?.data?.data?.estudiantes)?E?.data?.data?.estudiantes:[];const l=C?.data?.data??C?.data;let u=[];if(Array.isArray(l?.programas)?u=l.programas:Array.isArray(C?.data)&&(u=C?.data),Array.isArray(u)&&u.length===1){const s=u[0]||{},F=Number(s?.id??NaN),L=String(s?.nombre??"").trim();t=t.filter(M=>{const $=Array.isArray(M?.programas)?M.programas:[];if(!$.length)return!1;const O=!Number.isNaN(F)&&$.some(D=>Number(D?.id)===F),R=!O&&!!L&&$.some(D=>String(D?.nombre??"").trim()===L);return O||R})}const T=Array.isArray(v?.data?.asignaciones)?v?.data?.asignaciones:Array.isArray(v?.data?.data?.asignaciones)?v?.data?.data?.asignaciones:[];d(a),h(t);const n=new Map;a.forEach(s=>{s&&typeof s.id=="number"&&n.set(s.id,s)});const b=T.map(s=>({...s,programa_nombre:s.programa_nombre||n.get(s.id_apertura)?.programa_nombre||"Sin programa"}));w(b)}catch(f){await j.fire({icon:"error",title:"Error",text:f?.message||"Error al cargar los datos de asignación"})}finally{c(!1)}},[y]),_=o.useCallback(async(f,E)=>{await k.post(P.asignacion.crear,{id_apertura:Number(f),id_estudiante:E})},[]),r=o.useCallback(async f=>{await k.delete(P.asignacion.eliminar(f))},[]),i=o.useRef(!1);return o.useEffect(()=>{!y||i.current||(i.current=!0,N())},[y,N]),{aperturas:x,estudiantes:p,asignaciones:m,loading:A,cargarDatos:N,asignar:_,eliminarAsignacion:r}},oe=()=>{const{aperturas:g,estudiantes:x,asignaciones:d,cargarDatos:p,asignar:h,eliminarAsignacion:m,loading:w}=se(),[A,c]=o.useState(null),[y,N]=o.useState(""),[_,r]=o.useState(!1),[i,f]=o.useState(""),[E,v]=o.useState([]),C=async n=>{if(n.preventDefault(),!i||E.length===0){c({texto:"Debe seleccionar un cuestionario y al menos un estudiante",tipo:"warning"});return}try{await h(i,E),j.fire({icon:"success",title:"¡Éxito!",text:"Asignación realizada con éxito",timer:1500,showConfirmButton:!1}),f(""),v([]),r(!1),p()}catch(b){j.fire({icon:"error",title:"Error",text:b instanceof Error?b.message:"Error al realizar la asignación"})}},S=async n=>{j.fire({title:"¿Está seguro?",text:"¿Desea eliminar esta asignación?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(async b=>{if(b.isConfirmed)try{await m(n),j.fire({icon:"success",title:"¡Éxito!",text:"Asignación eliminada con éxito",timer:1500,showConfirmButton:!1}),p()}catch(s){console.error("Error general:",s),j.fire({icon:"error",title:"Error",text:s instanceof Error?s.message:"Error al eliminar la asignación"})}})},B=()=>{const n=!_;r(n),v(n?u.map(b=>b.id):[])},a=n=>{v(b=>b.includes(n)?b.filter(s=>s!==n):[...b,n])},t=i&&g.find(n=>n.id===parseInt(i))||null,u=x.filter(n=>t?(Array.isArray(n.programas)?n.programas.map(s=>String(s?.nombre??"")).filter(Boolean):[]).includes(t.programa_nombre):!0).filter(n=>{const b=y.toLowerCase(),s=Array.isArray(n.programas)?n.programas.map(F=>String(F?.nombre??"")).join(", ").toLowerCase():"";return String(n.nombre||"").toLowerCase().includes(b)||String(n.email||"").toLowerCase().includes(b)||s.includes(b)}),T=()=>i&&g.find(n=>n.id===parseInt(i))||null;return e.jsx(G,{children:e.jsx("div",{className:"min-vh-100 bg-light",children:e.jsxs("div",{className:"container-fluid py-3",children:[e.jsx(Q,{}),e.jsx(K,{mensaje:A,onClose:()=>c(null)}),e.jsxs("div",{className:"row g-4",children:[e.jsxs("div",{className:"col-12",children:[e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"row g-3",children:[e.jsx(W,{aperturas:g,selectedApertura:i,onAperturaChange:f,getSelectedAperturaDetails:T}),e.jsx(X,{estudiantes:x,selectedEstudiantes:E,filtroEstudiante:y,seleccionarTodos:_,onFiltroChange:N,onToggleSeleccionarTodos:B,onEstudianteCheckboxChange:a,filteredEstudiantes:u})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("button",{type:"submit",className:"btn btn-outline-orange w-100 d-inline-flex align-items-center justify-content-center gap-2 fw-semibold py-2",disabled:w||g.length===0||x.length===0,children:[e.jsx(Y,{}),e.jsx("span",{children:"Asignar"})]})})]}),e.jsx("hr",{className:"my-4"}),e.jsx("div",{className:"mt-2",children:e.jsx(ae,{onRecargarDatos:p,asignaciones:d})})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("hr",{className:"my-4"}),e.jsx(ee,{asignaciones:d,onEliminarAsignacion:S})]})]})]})})})};export{oe as default};
