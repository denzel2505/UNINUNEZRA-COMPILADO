import{j as e,R as ye,r as N,a as Y,d as oe,S as A,b as J,A as Q}from"./index-DzgdolRr.js";import{u as je}from"./index.esm-CYXbCPU-.js";import{P as ne}from"./PageTransition-CYHo0rrb.js";import{read as ve,utils as Ne}from"./xlsx-DLvP5s0v.js";const we=()=>e.jsx("div",{className:"card border-0 mb-4",style:{background:"linear-gradient(135deg, #00a19b 0%, #008f89 100%)",color:"white",borderRadius:"12px",boxShadow:"0 4px 15px rgba(0,0,0,0.03)",position:"relative",overflow:"hidden"},children:e.jsx("div",{className:"card-body p-4",children:e.jsx("h1",{className:"mb-0 text-white text-center",style:{fontSize:"2rem",fontWeight:"700"},children:"Crear Cuestionario"})})}),Ce=({puntajeTotal:t,puntajeMaximo:o,programaSeleccionado:c,mostrarDetallePuntaje:b,onToggleDetalle:f,onCerrarDetalle:l})=>{const m=t/o*100,j=t===o?"perfecto":t>o?"excedido":t>=o*.5?"medio":"bajo",x=()=>{switch(j){case"perfecto":return"linear-gradient(135deg, #27ae60, #229954)";case"excedido":return"linear-gradient(135deg, #8e44ad, #7d3c98)";case"medio":return"linear-gradient(135deg, #f39c12, #e67e22)";default:return"linear-gradient(135deg, #e74c3c, #c0392b)"}},k=()=>{switch(j){case"perfecto":return"bg-success";case"excedido":return"bg-purple";case"medio":return"bg-warning text-dark";default:return"bg-danger"}},n=()=>{switch(j){case"excedido":return"Excedido";case"perfecto":return"Perfecto";case"medio":return"Parcial";default:return"Bajo"}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-none d-lg-block",style:{position:"fixed",bottom:30,right:30,zIndex:1e3},children:[e.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center rounded-circle",style:{width:80,height:80,background:x(),color:"white",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",cursor:"pointer",transition:"all 0.3s ease"},onClick:f,onMouseOver:r=>{r.currentTarget.style.transform="scale(1.1)",r.currentTarget.style.boxShadow="0 6px 25px rgba(0,0,0,0.2)"},onMouseOut:r=>{r.currentTarget.style.transform="scale(1)",r.currentTarget.style.boxShadow="0 4px 20px rgba(0,0,0,0.15)"},children:[e.jsx("span",{style:{fontSize:"1.4rem",fontWeight:"bold",lineHeight:1},children:t%1===0?t.toFixed(0):t.toFixed(1)}),e.jsxs("span",{style:{fontSize:"0.7rem",opacity:.9,lineHeight:1},children:["Máx: ",o]})]}),b&&e.jsx("div",{className:"position-absolute",style:{bottom:100,right:0,width:280},children:e.jsxs("div",{className:"card border-0 shadow-lg",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",style:{background:"linear-gradient(135deg, #f8f9fa, #e9ecef)",borderBottom:"1px solid #e2e8f0"},children:[e.jsx("h6",{className:"mb-0",style:{color:"#2c3e50",fontWeight:600},children:"Detalles del Puntaje"}),e.jsx("button",{type:"button",className:"btn-close",onClick:l,"aria-label":"Cerrar"})]}),e.jsxs("div",{className:"card-body p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2 p-2 bg-light rounded",children:[e.jsx("span",{style:{fontWeight:500,color:"#2c3e50",fontSize:"0.9rem"},children:"Actual:"}),e.jsx("span",{style:{fontWeight:600,color:"#34495e",fontSize:"0.9rem"},children:t%1===0?t.toFixed(0):t.toFixed(1)})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2 p-2 bg-light rounded",children:[e.jsx("span",{style:{fontWeight:500,color:"#2c3e50",fontSize:"0.9rem"},children:"Máximo:"}),e.jsx("span",{style:{fontWeight:600,color:"#34495e",fontSize:"0.9rem"},children:o})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2 p-2 bg-light rounded",children:[e.jsx("span",{style:{fontWeight:500,color:"#2c3e50",fontSize:"0.9rem"},children:"Porcentaje:"}),e.jsxs("span",{style:{fontWeight:600,color:"#34495e",fontSize:"0.9rem"},children:[m.toFixed(1),"%"]})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3 p-2 bg-light rounded",children:[e.jsx("span",{style:{fontWeight:500,color:"#2c3e50",fontSize:"0.9rem"},children:"Estado:"}),e.jsx("span",{className:`badge ${k()}`,style:{fontSize:"0.8rem",fontWeight:600},children:n()})]}),c&&e.jsx("div",{className:"text-center pt-2 border-top",children:e.jsxs("small",{style:{color:"#7f8c8d",fontStyle:"italic"},children:["Programa: ",c.nivel_nombre]})})]})]})})]}),e.jsx("div",{className:"d-block d-lg-none w-100",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header",style:{background:"linear-gradient(135deg, #f8f9fa, #e9ecef)"},children:e.jsx("h6",{className:"mb-0",style:{color:"#2c3e50",fontWeight:600},children:"Detalles del Puntaje"})}),e.jsxs("div",{className:"card-body p-3",children:[e.jsxs("div",{className:"row g-2",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"p-2 bg-light rounded d-flex justify-content-between",children:[e.jsx("span",{children:"Actual:"}),e.jsx("strong",{children:t%1===0?t.toFixed(0):t.toFixed(1)})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"p-2 bg-light rounded d-flex justify-content-between",children:[e.jsx("span",{children:"Máximo:"}),e.jsx("strong",{children:o})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"p-2 bg-light rounded d-flex justify-content-between",children:[e.jsx("span",{children:"%:"}),e.jsxs("strong",{children:[m.toFixed(1),"%"]})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"p-2 bg-light rounded d-flex justify-content-between",children:[e.jsx("span",{children:"Estado:"}),e.jsx("span",{className:`badge ${k()}`,children:n()})]})})]}),c&&e.jsx("div",{className:"text-center pt-2",children:e.jsxs("small",{style:{color:"#7f8c8d"},children:["Programa: ",c.nivel_nombre]})})]})]})})]})},Ee=({programas:t,register:o,errors:c,puntajeMaximo:b,programaDisabled:f=!1})=>e.jsxs("div",{className:"row g-3 mb-3 pb-3",children:[e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:`form-label ${c?.titulo?"text-danger fw-semibold":""}`,style:{color:c?.titulo?void 0:"#2c3e50",fontWeight:"500",fontSize:"0.9rem"},children:"Título *"}),e.jsx("input",{type:"text",...o("titulo",{required:"El título es requerido"}),"aria-invalid":!!c?.titulo,className:`form-control ${c?.titulo?"is-invalid":""}`,placeholder:"Título del cuestionario *",style:{fontSize:"0.9rem"}}),c?.titulo&&e.jsx("div",{className:"invalid-feedback",role:"alert",style:{color:"#dc3545",fontWeight:600},children:String(c.titulo?.message||"Campo requerido")})]})}),e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("label",{className:`form-label ${c?.programaId?"text-danger fw-semibold":""}`,style:{color:c?.programaId?void 0:"#2c3e50",fontWeight:"500",fontSize:"0.9rem"},children:"Programa *"}),!c?.programaId&&typeof b=="number"&&b>0&&e.jsxs("small",{className:"text-muted ms-2",children:[e.jsx("i",{className:"fas fa-gauge-high me-1","aria-hidden":"true"}),"Puntaje máximo para este programa: ",e.jsx("strong",{children:b})]})]}),e.jsx("select",{...o("programaId",{required:"El programa es requerido"}),"aria-invalid":!!c?.programaId,className:`form-select ${c?.programaId?"is-invalid":""}`,disabled:f,style:{fontSize:"0.9rem",backgroundColor:f?"#f8f9fa":"white",cursor:f?"not-allowed":"pointer",opacity:f?.7:1},children:f&&t.length===1?e.jsxs("option",{value:t[0].id,children:[t[0].nombre,t[0].nivel_nombre?` - ${t[0].nivel_nombre}`:"",t[0].campus_nombre?` - ${t[0].campus_nombre}`:"",!t[0].nivel_nombre||!t[0].campus_nombre?" (Información incompleta)":""]}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"Seleccione un programa"}),t.map(l=>e.jsxs("option",{value:l.id,children:[l.nombre,l.nivel_nombre?` - ${l.nivel_nombre}`:"",l.campus_nombre?` - ${l.campus_nombre}`:"",!l.nivel_nombre||!l.campus_nombre?" (Información incompleta)":""]},l.id))]})}),c?.programaId&&e.jsx("div",{className:"invalid-feedback",role:"alert",style:{color:"#dc3545",fontWeight:600},children:String(c.programaId?.message||"Campo requerido")}),f&&t.length===1&&e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-lock me-1"}),"Solo puedes crear cuestionarios para tu programa asignado: ",e.jsx("strong",{children:t[0].nombre}),(!t[0].nivel_nombre||!t[0].campus_nombre)&&e.jsx("span",{className:"text-warning",children:" ⚠️ Información del programa incompleta (nivel y campus no disponibles)"})]}),!f&&t.length===1&&e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),"Solo puedes crear cuestionarios para tu programa asignado: ",e.jsx("strong",{children:t[0].nombre}),(!t[0].nivel_nombre||!t[0].campus_nombre)&&e.jsx("span",{className:"text-warning",children:" ⚠️ Información del programa incompleta (nivel y campus no disponibles)"})]}),!f&&t.length>1&&e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),"Puedes crear cuestionarios para cualquier programa disponible"]})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:`form-label ${c?.descripcion?"text-danger fw-semibold":""}`,style:{color:c?.descripcion?void 0:"#2c3e50",fontWeight:"500",fontSize:"0.9rem"},children:"Descripción *"}),e.jsx("textarea",{...o("descripcion",{required:"La descripción es requerida"}),"aria-invalid":!!c?.descripcion,className:`form-control ${c?.descripcion?"is-invalid":""}`,placeholder:"Descripción del cuestionario *",rows:2,style:{fontSize:"0.9rem",minHeight:"60px",resize:"vertical"}}),c?.descripcion&&e.jsx("div",{className:"invalid-feedback",role:"alert",style:{color:"#dc3545",fontWeight:600},children:String(c.descripcion?.message||"Campo requerido")})]})})]}),Z=({imagen:t,onImagenChange:o,onEliminarImagen:c,onDragOver:b,onDrop:f,placeholder:l,inputId:m,className:j=""})=>e.jsxs("div",{className:j,children:[e.jsx("div",{className:`border-2 border-dashed rounded p-3 text-center cursor-pointer transition-all ${t?"border-success bg-light":"border-secondary bg-light"}`,style:{minHeight:"100px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},onDragOver:b,onDrop:f,onClick:()=>document.getElementById(m)?.click(),onMouseOver:x=>{x.currentTarget.style.borderColor="#d35400",x.currentTarget.style.backgroundColor="#fff3e0",x.currentTarget.style.transform="scale(1.02)",x.currentTarget.style.boxShadow="0 4px 12px rgba(211, 84, 0, 0.3)"},onMouseOut:x=>{x.currentTarget.style.borderColor=t?"#28a745":"#6c757d",x.currentTarget.style.backgroundColor="#f8f9fa",x.currentTarget.style.transform="scale(1)",x.currentTarget.style.boxShadow="none"},children:t?e.jsxs("div",{className:"w-100 d-flex align-items-center justify-content-center",children:[e.jsx("img",{src:URL.createObjectURL(t),alt:l,className:"img-fluid rounded",style:{maxHeight:"100px",objectFit:"contain"}}),e.jsx("button",{type:"button",title:"Eliminar imagen",onClick:x=>{x.stopPropagation(),c()},className:"btn btn-danger btn-sm ms-2 d-flex mb-auto",style:{width:"24px",height:"24px",padding:"0",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem"},children:e.jsx("i",{className:"fas fa-times"})})]}):e.jsxs("div",{className:"d-flex flex-column align-items-center gap-2",children:[e.jsx("i",{className:"fas fa-image",style:{fontSize:"1.5rem",color:"#bdc3c7"}}),e.jsx("span",{style:{fontSize:"0.9rem",fontWeight:"500",color:"#7f8c8d"},children:l}),e.jsx("small",{style:{fontSize:"0.75rem",color:"#95a5a6"},children:"Formatos aceptados: JPG, PNG, GIF (máx. 2MB)"})]})}),e.jsx("input",{id:m,type:"file",onChange:x=>o(x.target.files),accept:"image/jpeg,image/png,image/gif",style:{display:"none"}})]}),se=({opciones:t,preguntaIndex:o,orientacion:c=1,opcionCorrecta:b,onOpcionChange:f,onCorrectaChange:l,onAgregarOpcion:m,onEliminarOpcion:j,onImagenOpcionChange:x,onEliminarImagenOpcion:k,onDragOver:n,onDrop:r})=>{const s=c===0;return e.jsxs("div",{className:"mt-3 ",children:[e.jsx("h5",{style:{color:"#2c3e50",marginBottom:"1rem",fontSize:"1rem"},children:"Opciones de respuesta*"}),e.jsx("p",{style:{fontSize:"0.875rem",color:"#6c757d",marginBottom:"1rem",fontStyle:"italic"},children:"Selecciona la opción correcta marcando el circulo"}),e.jsx("div",{className:s?"ms-md-auto":"",style:s?{maxWidth:560}:void 0,children:t.map((a,u)=>e.jsxs(ye.Fragment,{children:[e.jsxs("div",{className:"mb-3 p-2 rounded-3",style:{backgroundColor:"transparent"},children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsxs("label",{className:"mb-0",style:{color:"#2c3e50",fontSize:"0.9rem",fontWeight:500},children:["Opción de respuesta ",u+1]}),t.length>2&&e.jsx("button",{type:"button",title:"Eliminar opción",onClick:()=>j(u),className:"text-danger border-0 bg-transparent text-decoration-underline",style:{fontSize:"0.8rem"},children:"Quitar opción"})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("label",{htmlFor:`correcta-${o}-${u}`,className:"mb-0",style:{fontSize:"0.85rem",color:"#6c757d"},children:"Marcar opción como correcta"}),e.jsx("input",{type:"radio",name:`correcta-${o}`,checked:b===u,onChange:()=>l(u),required:!0,id:`correcta-${o}-${u}`,style:{width:"18px",height:"18px",cursor:"pointer"}})]})]}),e.jsx("div",{className:"d-flex align-items-center gap-2 mb-2",children:e.jsx("input",{type:"text",value:a.texto,onChange:R=>f(u,R.target.value),required:!0,className:"form-control",placeholder:`Opción ${u+1}`,style:{fontSize:"0.85rem"}})}),e.jsx("div",{className:"mt-2",style:{minHeight:"80px"},children:e.jsx(Z,{imagen:a.imagen,onImagenChange:R=>x(u,R),onEliminarImagen:()=>k(u),onDragOver:n,onDrop:R=>r(R,u),placeholder:`Imagen para opción ${u+1} (opcional)`,inputId:`opcion-img-${o}-${u}`,className:""})})]}),u<t.length-1&&e.jsx("div",{className:"my-3",style:{height:"1px",backgroundColor:"#eceff1"}})]},u))}),e.jsxs("button",{type:"button",onClick:m,className:"btn btn-outline-secondary w-100 py-2",style:{borderColor:"#e67e22",color:"#e67e22",fontWeight:"500",fontSize:"0.85rem",transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.03)"},onMouseOver:a=>{a.currentTarget.style.backgroundColor="#e67e22",a.currentTarget.style.color="white",a.currentTarget.style.transform="translateY(-1px)",a.currentTarget.style.boxShadow="0 4px 8px rgba(230, 126, 34, 0.3)"},onMouseOut:a=>{a.currentTarget.style.backgroundColor="transparent",a.currentTarget.style.color="#e67e22",a.currentTarget.style.transform="translateY(0)",a.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.03)"},children:[e.jsx("i",{className:"fas fa-plus me-2"})," Agregar Opción"]})]})},Se=({pregunta:t,preguntaIndex:o,onEliminarPregunta:c,onActualizarPregunta:b,onActualizarPeso:f,onActualizarOrientacion:l,onActualizarOpcion:m,onAgregarOpcion:j,onEliminarOpcion:x,onImagenPreguntaChange:k,onEliminarImagenPregunta:n,onImagenOpcionChange:r,onEliminarImagenOpcion:s,onDragOver:a,onDropPregunta:u,onDropOpcion:R,allCollapsed:z=null})=>{const[T,y]=N.useState(!1);N.useEffect(()=>{z!=null&&y(z)},[z]);const[g,d]=N.useState(t.peso===0?"":String(t.peso));return N.useEffect(()=>{d(t.peso===0?"":String(t.peso))},[t.peso]),e.jsxs("div",{className:"mb-3 p-3 border rounded bg-white",style:{borderColor:"#e9ecef"},children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsxs("h5",{className:"mb-0",style:{color:"",fontSize:"1.1rem"},children:["Pregunta ",o+1]}),e.jsx("button",{type:"button",onClick:c,className:"text-danger border-0 bg-transparent text-decoration-underline fs-6",style:{fontSize:"0.85rem"},children:"Quitar pregunta"})]}),e.jsxs("div",{className:"d-flex align-items-end gap-2",children:[e.jsxs("div",{style:{width:"100px"},children:[e.jsx("label",{className:"form-label mb-1 small",children:"Orientación"}),e.jsxs("select",{value:t.orientacion!==void 0?t.orientacion:1,onChange:i=>{l(Number(i.target.value))},className:"form-select form-select-sm",style:{height:"34px",borderRadius:"6px"},children:[e.jsx("option",{value:1,children:"Vertical"}),e.jsx("option",{value:0,children:"Horizontal"})]})]}),e.jsxs("div",{style:{width:"100px",padding:"0px"},children:[e.jsx("label",{className:"form-label mb-1 small",children:"Peso"}),e.jsx("input",{type:"number",value:g,onChange:i=>d(i.target.value),onBlur:i=>f(i.target.value),placeholder:"0.00",min:"0.01",step:"0.01",className:"form-control form-control-sm text-center",style:{height:"31px",paddingTop:"0",paddingBottom:"0",borderRadius:"6px"}})]}),e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>y(i=>!i),title:T?"Expandir":"Contraer",style:{height:"34px",width:"31px",padding:0,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("i",{className:`fas ${T?"fa-chevron-down":"fa-chevron-up"}`})})]})]}),!T&&e.jsx(e.Fragment,{children:t.orientacion===0?e.jsxs("div",{className:"row g-3 d-flex align-items-center",children:[e.jsx("div",{className:"col-12 col-md-6 d-flex h-100",children:e.jsxs("div",{className:"mx-auto my-2 my-md-0 d-flex flex-column justify-content-center w-100",style:{maxWidth:560},children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label mb-1 small",children:["Texto Pregunta ",o+1]}),e.jsx("textarea",{value:t.texto,onChange:i=>b("texto",i.target.value),required:!0,className:"form-control",placeholder:"Texto de la pregunta *",style:{fontSize:"0.9rem"}})]}),e.jsx(Z,{imagen:t.imagen,onImagenChange:k,onEliminarImagen:n,onDragOver:a,onDrop:i=>u(i),placeholder:"Haga clic para seleccionar una imagen",inputId:`pregunta-img-${o}`})]})}),e.jsx("div",{className:"col-12 col-md-6",children:e.jsx(se,{opciones:t.opciones,preguntaIndex:o,orientacion:t.orientacion,opcionCorrecta:t.correcta,onOpcionChange:m,onCorrectaChange:i=>b("correcta",i),onAgregarOpcion:j,onEliminarOpcion:x,onImagenOpcionChange:r,onEliminarImagenOpcion:s,onDragOver:a,onDrop:R})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-12 col-md-8",children:e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label mb-1 small",children:["Texto Pregunta ",o+1]}),e.jsx("textarea",{value:t.texto,onChange:i=>b("texto",i.target.value),required:!0,className:"form-control",placeholder:"Texto de la pregunta *",style:{fontSize:"0.9rem"}})]})}),e.jsx("div",{className:"col-12 col-md-4",children:e.jsx(Z,{imagen:t.imagen,onImagenChange:k,onEliminarImagen:n,onDragOver:a,onDrop:i=>u(i),placeholder:"Haga clic para seleccionar una imagen",inputId:`pregunta-img-${o}`})})]}),e.jsx(se,{opciones:t.opciones,preguntaIndex:o,orientacion:t.orientacion,opcionCorrecta:t.correcta,onOpcionChange:m,onCorrectaChange:i=>b("correcta",i),onAgregarOpcion:j,onEliminarOpcion:x,onImagenOpcionChange:r,onEliminarImagenOpcion:s,onDragOver:a,onDrop:R})]})})]})},Pe=({puntajeTotal:t,puntajeMaximo:o,onSubmit:c})=>{const b=Y(),f=Math.abs(t-o)>=.01,l=()=>Math.abs(t-o)>=.01?t>o?`No puedes guardar: Puntaje excedido (${t%1===0?t.toFixed(0):t.toFixed(2)}/${o})`:`No puedes guardar: Puntaje insuficiente (${t%1===0?t.toFixed(0):t.toFixed(2)}/${o})`:"Puntaje correcto - Listo para crear";return e.jsxs("div",{className:"d-flex gap-3 mt-4 pt-3 border-top",children:[e.jsxs("button",{type:"submit",className:`btn flex-grow-1 py-2 ${f?"btn-secondary":"btn-outline-secondary"}`,disabled:f,onClick:m=>{m.preventDefault(),c(m)},title:l(),style:{borderColor:"#00a19B",color:f?"#6c757d":"#00a19B",fontWeight:"500",transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.03)"},onMouseOver:m=>{f||(m.currentTarget.style.backgroundColor="#00a19B",m.currentTarget.style.color="white",m.currentTarget.style.transform="translateY(-2px)",m.currentTarget.style.boxShadow="0 8px 30px rgba(0,0,0,0.06)")},onMouseOut:m=>{f||(m.currentTarget.style.backgroundColor="transparent",m.currentTarget.style.color="#00a19B",m.currentTarget.style.transform="translateY(0)",m.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.03)")},children:[e.jsx("i",{className:"fas fa-save me-2"})," Guardar Cuestionario"]}),e.jsxs("button",{type:"button",onClick:()=>b("/dashboard"),className:"btn btn-outline-secondary py-2",style:{borderColor:"#6c757d",color:"#6c757d",fontWeight:"500",transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.03)"},onMouseOver:m=>{m.currentTarget.style.backgroundColor="#6c757d",m.currentTarget.style.color="white",m.currentTarget.style.transform="translateY(-2px)",m.currentTarget.style.boxShadow="0 8px 30px rgba(0,0,0,0.06)"},onMouseOut:m=>{m.currentTarget.style.backgroundColor="transparent",m.currentTarget.style.color="#6c757d",m.currentTarget.style.transform="translateY(0)",m.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.03)"},children:[e.jsx("i",{className:"fas fa-times me-2"})," Cancelar"]})]})},Oe=()=>{const[t,o]=N.useState(null),[c,b]=N.useState(!0),f=Y(),l=N.useContext(oe),m=N.useRef(!1),j=N.useCallback(async()=>{try{if(!l||!l.user)throw new Error("No hay datos de usuario");if(!l.user.id)throw new Error("Usuario sin ID válido");o(l.user)}catch{await A.fire({icon:"error",title:"No autorizado",text:"Debe iniciar sesión para crear un cuestionario"}),f("/login")}finally{b(!1)}},[f,l]);return N.useEffect(()=>{m.current||(m.current=!0,j())},[j]),{usuario:t,loading:c,isAuthenticated:!!t}},Te=t=>{const[o,c]=N.useState([]),[b,f]=N.useState(!0),l=Y(),m=N.useRef(!1),j=r=>{if(!r)return 100;switch(r.toLowerCase()){case"técnico":case"tecnico":return 50;case"tecnológico":case"tecnologico":return 75;case"universitario":case"profesional":return 100;case"especialización":case"especializacion":return 120;case"maestría":case"maestria":return 150;case"doctorado":return 200;default:return 100}},x=N.useCallback(async()=>{try{f(!0);const r=await J.get(Q.programas.base);if(!r.data)throw new Error("Respuesta vacía del servidor");if(typeof r.data!="object")throw new Error(`Respuesta del servidor no es un objeto válido. Tipo recibido: ${typeof r.data}`);if(r.data.error)throw new Error(`Error del servidor: ${r.data.error}`);if(r.data.success===!1)throw new Error(`Operación fallida: ${r.data.message||"Error desconocido"}`);let s=r.data;if(Array.isArray(r.data)&&(s={programas:r.data,success:!0}),s.success&&Array.isArray(s.programas)){let a=s.programas;t&&(a=s.programas.filter(u=>u.id===t)),c(a)}else if(s.success&&s.data&&s.data.programas&&Array.isArray(s.data.programas)){let a=s.data.programas;t&&(a=s.data.programas.filter(u=>u.id===t)),c(a)}else if(s.success&&s.data&&s.data.programa&&Array.isArray(s.data.programa)){let a=s.data.programa;c(a)}else if(s.success&&s.data)if(Array.isArray(s.data)){let a=s.data;t&&(a=s.data.filter(u=>u.id===t)),c(a)}else console.warn("⚠️ La API devolvió success pero data no es un array:",s.data),c([]);else{console.warn("⚠️ Estructura de respuesta inesperada, intentando extraer programas...");let a=[];Array.isArray(r.data)?a=r.data:r.data.data&&Array.isArray(r.data.data)?a=r.data.data:r.data.programas&&Array.isArray(r.data.programas)?a=r.data.programas:r.data.data&&r.data.data.programas&&Array.isArray(r.data.data.programas)&&(a=r.data.data.programas),t&&a.length>0&&(a=a.filter(u=>u.id===t)),a.length,c(a)}}catch(r){if(console.error("Error al cargar programas:",r),r?.response?.status===401){await A.fire({icon:"error",title:"No autorizado",text:"Debe iniciar sesión para crear un cuestionario"}),l("/login-docente");return}const s=r?.response?.data?.message||r?.message||"Error de conexión al cargar programas";A.fire("Error",s,"error"),c([])}finally{f(!1)}},[t,l]),k=r=>{if(!o||!Array.isArray(o)){console.warn("⚠️ No hay programas disponibles o no es un array válido");return}return o.find(s=>s.id.toString()===r)},n=r=>{const s=k(r);return s?.nivel_puntaje_maximo||j(s?.nivel_nombre)};return N.useEffect(()=>{m.current||(m.current=!0,x())},[x]),{programas:o,loading:b,cargarProgramas:x,obtenerProgramaPorId:k,obtenerPuntajeMaximo:n,obtenerPuntajeMaximoPorDefecto:j}},Ae=()=>{const[t,o]=N.useState([]),c=g=>g.type.startsWith("image/")?g.size>2*1024*1024?(A.fire("Error","La imagen no debe exceder 2MB","error"),!1):!0:(A.fire("Error","El archivo debe ser una imagen (JPEG, PNG o GIF)","error"),!1),b=()=>{const g={texto:"",opciones:[{texto:"",imagen:null},{texto:"",imagen:null},{texto:"",imagen:null},{texto:"",imagen:null}],correcta:null,peso:0,imagen:null,orientacion:1};o(d=>[...d,g])},f=g=>{o(d=>{const i=[...d];return i.splice(g,1),i})},l=(g,d,i)=>{o(p=>{const h=[...p];return h[g][d]=i,h})},m=(g,d)=>{o(i=>{const p=[...i],h=parseFloat(d);return p[g].peso=isNaN(h)||d===""?0:Math.max(.01,h),p})},j=(g,d)=>{o(i=>{const p=[...i];return p[g].orientacion=d,p})},x=(g,d,i)=>{o(p=>p.map((h,S)=>{if(S!==g)return h;const C=h.opciones.map((_,v)=>v===d?{..._,texto:i}:_);return{...h,opciones:C}}))},k=g=>{o(d=>d.map((i,p)=>p!==g?i:{...i,opciones:[...i.opciones,{texto:"",imagen:null}]}))},n=(g,d)=>{o(i=>i.map((p,h)=>{if(h!==g)return p;if(p.opciones.length<=1)return A.fire("Aviso","Debe haber al menos 2 opciones por pregunta","info"),p;const S=p.opciones.filter((_,v)=>v!==d);let C=p.correcta;return C===d?C=null:C!==null&&C>d&&(C=C-1),{...p,opciones:S,correcta:C}}))},r=(g,d)=>{if(d&&d.length>0){const i=d[0];c(i)&&o(p=>p.map((h,S)=>S===g?{...h,imagen:i}:h))}},s=(g,d,i)=>{if(i&&i.length>0){const p=i[0];c(p)&&o(h=>h.map((S,C)=>{if(C!==g)return S;const _=S.opciones.map((v,M)=>M===d?{...v,imagen:p}:v);return{...S,opciones:_}}))}};return{preguntas:t,setPreguntas:o,agregarPregunta:b,eliminarPregunta:f,actualizarPregunta:l,actualizarPeso:m,actualizarOrientacion:j,actualizarOpcion:x,agregarOpcion:k,eliminarOpcion:n,manejarImagenPregunta:r,manejarImagenOpcion:s,eliminarImagenOpcion:(g,d)=>{o(i=>i.map((p,h)=>{if(h!==g)return p;const S=p.opciones.map((C,_)=>_===d?{...C,imagen:null}:C);return{...p,opciones:S}}))},handleDragOver:g=>{g.preventDefault(),g.stopPropagation()},handleDrop:(g,d,i,p)=>{g.preventDefault(),g.stopPropagation();const h=g.dataTransfer.files;d==="pregunta"?r(i,h):d==="opcion"&&p!==void 0&&s(i,p,h)},calcularPuntajeTotal:()=>t.reduce((g,d)=>g+(d.peso||0),0),tieneImagenes:()=>t.some(g=>g.imagen!==null||g.opciones.some(d=>d.imagen!==null)),inicializar:()=>{t.length===0&&b()},validarImagen:c}},ke=()=>{const[t,o]=N.useState(!1),c=Y(),b=N.useContext(oe),f=async(n,r)=>n===0?(await A.fire({icon:"warning",title:"Puntaje requerido",text:"Debe asignar pesos a las preguntas. El puntaje total no puede ser 0."}),!1):Math.abs(n-r)>=.01?(n>r?await A.fire({icon:"error",title:"No se puede crear el cuestionario",text:`El puntaje total (${n%1===0?n.toFixed(0):n.toFixed(2)}) excede el máximo permitido (${r}). Debe ajustar los pesos de las preguntas.`,confirmButtonText:"Entendido",allowOutsideClick:!1,allowEscapeKey:!1}):await A.fire({icon:"warning",title:"No se puede crear el cuestionario",text:`El puntaje total debe ser exactamente ${r}. Actual: ${n%1===0?n.toFixed(0):n.toFixed(2)}. Debe ajustar los pesos de las preguntas.`,confirmButtonText:"Entendido",allowOutsideClick:!1,allowEscapeKey:!1}),!1):!0,l=(n,r,s)=>{const a={};return(!n||!n.trim())&&(a.titulo="El título es requerido"),(!r||!r.trim())&&(a.descripcion="La descripción es requerida"),s||(a.programa="Debe seleccionar un programa"),a},m=async n=>{const r=n?.data??n;if(r?.success){await A.fire({icon:"success",title:"¡Éxito!",text:r?.message||"Operación realizada correctamente",allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"OK"});const a=r?.cuestionario_id??r?.data?.cuestionario_id;c(a?`/ver/${a}`:"/dashboard");return}const s=r?.debug_message||r?.error||r?.message||"Error al crear el cuestionario";throw new Error(s)},j=n=>new Promise((r,s)=>{const a=new FileReader;a.onload=()=>r(a.result),a.onerror=s,a.readAsDataURL(n)}),x=async n=>{const r=[];for(let s=0;s<n.length;s++){const a=n[s],u=a.opciones.map(y=>({texto:(y.texto||"").trim(),_file:y.imagen})).filter(y=>y.texto.length>0||y._file),R=(a.texto||"").trim(),z=typeof a.correcta=="number"?a.correcta:-1,T={texto_pregunta:R,peso:a.peso,correcta:z,orientacion:a.orientacion,opciones:u.map(({texto:y})=>({texto:y}))};if(a.imagen){const y=await j(a.imagen);T.imagen_base64=y,T.nombre_imagen_pregunta=a.imagen.name}T.opciones=await Promise.all(a.opciones.map(async y=>{const g={texto:(y.texto||"").trim()};return y.imagen&&(g.imagen_base64=await j(y.imagen),g.nombre_imagen_opcion=y.imagen.name),g})),r.push(T)}return r};return{loading:t,submitForm:async(n,r,s,a,u,R,z,T)=>{try{o(!0);const y=l(n,r,s);if(Object.keys(y).length>0){T(y),await A.fire({icon:"error",title:"Error de validación",text:"Por favor, complete todos los campos requeridos",allowOutsideClick:!1,allowEscapeKey:!1});return}if(T({}),!await f(u,R))return;if(!(b?.user?.id||(()=>{try{return JSON.parse(localStorage.getItem("user")||"{}")?.id}catch{return}})()))throw new Error("Debe iniciar sesión para crear un cuestionario");const i={titulo:n,descripcion:r,programa_id:Number(s),tiempo_limite:"00:40:00"},h=(await J.post(Q.cuestionario.crear,i))?.data,S=h?.data?.cuestionario_id??h?.cuestionario_id;if(!h?.success||!S){const v=h?.error||h?.message||"No se pudo crear el cuestionario";throw new Error(v)}const C=await x(a);if(C.some(v=>!v.texto_pregunta))throw new Error("Todas las preguntas deben tener texto");if(C.some(v=>v.opciones.length<2))throw new Error("Cada pregunta debe tener al menos 2 opciones con texto");if(C.some(v=>v.correcta<0||v.correcta>=v.opciones.length))throw new Error("Cada pregunta debe tener una opción correcta válida");let _;try{_=await J.post(Q.cuestionario.anexarPreguntas(S),{preguntas:C})}catch(v){console.error("Error en anexarPreguntas:",v),console.error("Response data:",v?.response?.data),console.error("Response status:",v?.response?.status);const M=v?.response?.data?.error||v?.response?.data?.message||v?.message;throw new Error(M||"Error al anexar preguntas y opciones")}await m(_)}catch(y){console.error("Error completo:",y),await A.fire({icon:"error",title:"Error",text:y.message||"Error al crear el cuestionario",allowOutsideClick:!1,allowEscapeKey:!1}),(y.message||"").includes("iniciar sesión")&&c("/login-docente")}finally{o(!1)}},validarPuntaje:f,validarCampos:l,procesarRespuesta:m}},Re=({onImport:t})=>{const o=N.useRef(null),c=()=>{o.current?.click()},b=()=>{const n="/form-template.xlsx",r=document.createElement("a");r.href=n,r.download="form-template.xlsx",document.body.appendChild(r),r.click(),r.remove()},f=n=>n?.toString().trim().replace(/:$/,"").toUpperCase(),l=(n,r)=>{const s={};for(const[a,u]of Object.entries(n))s[f(a)]=u;for(const a of r){const u=s[f(a)];if(u!==void 0)return u}},m=n=>{if(n==null||n==="")return NaN;const r=String(n).replace(/,/g,"."),s=parseFloat(r);return Number.isFinite(s)?s:NaN},j=n=>{if(n==null||n==="")return{value:null,converted:!1};const r=String(n).trim(),s=r.toUpperCase();if(["A","B","C","D"].includes(s))return{value:s.charCodeAt(0)-65,converted:!0};const a=m(r);if(!Number.isFinite(a))return{value:null,converted:!1};const u=Math.trunc(a);return u>=1&&u<=4?{value:u-1,converted:!0}:u>=0&&u<=3?{value:u,converted:!1}:{value:null,converted:!1}},x=async n=>{try{const r=await n.arrayBuffer(),s=ve(r,{type:"array"}),a=s.SheetNames[0],u=s.Sheets[a],R=Ne.sheet_to_json(u);let z=0;const T=R.map(d=>{const i=l(d,["PREGUNTA","PREGUNTA:"]);if(!i)return null;const p=l(d,["PESO PREGUNTA","PESO","PESO:","PESO PREGUNTA:"]),h=l(d,["CORRECTA","CORRECTA:","RESPUESTA CORRECTA","RESPUESTA CORRECTA:","OPCION CORRECTA","OPCION CORRECTA:","OPCIÓN CORRECTA","OPCIÓN CORRECTA:","CORRECTA (0-3)","CORRECTA (1-4)","CORRECTA 0-3","CORRECTA 1-4"]),S=j(h);S.converted&&z++;const C=[{texto:l(d,["OPCION 1","OPCION 1:"]),imagen_opcion:l(d,["IMAGEN OPCION 1","IMAGEN OPCION 1:"])},{texto:l(d,["OPCION 2","OPCION 2:"]),imagen_opcion:l(d,["IMAGEN OPCION 2","IMAGEN OPCION 2:"])},{texto:l(d,["OPCION 3","OPCION 3:"]),imagen_opcion:l(d,["IMAGEN OPCION 3","IMAGEN OPCION 3:"])},{texto:l(d,["OPCION 4","OPCION 4:"]),imagen_opcion:l(d,["IMAGEN OPCION 4","IMAGEN OPCION 4:"])}];return{texto:i,peso:Number.isFinite(m(p))?m(p):0,imagen_pregunta:l(d,["IMAGEN PREGUNTA","IMAGEN PREGUNTA:"]),imagen_pregunta_nombre:l(d,["IMAGEN NOMBRE","IMAGEN NOMBRE:"]),correcta:S.value,opciones:C}}).filter(Boolean);t&&t({preguntas:T});const g=z>0?`Se insertaron ${T.length} pregunta(s). Se convirtieron ${z} respuesta(s) correcta(s) al formato 0–3 (desde 1–4 o A–D).`:`Se insertaron ${T.length} pregunta(s) en el formulario.`;await A.fire({icon:"success",title:"Plantilla importada",text:g,timer:2600,showConfirmButton:!1})}catch(r){console.error(r),await A.fire({icon:"error",title:"Error al procesar el Excel",text:"Verifica que el archivo coincida con la plantilla y vuelva a intentarlo."})}},k=async n=>{const r=n.target.files?.[0];if(r){if(!/\.xlsx?$/.test(r.name.toLowerCase())){await A.fire({icon:"warning",title:"Formato no soportado",text:"Selecciona un archivo .xlsx o .xls"}),n.target.value="";return}await x(r),n.target.value=""}};return e.jsxs(e.Fragment,{children:[e.jsx("input",{ref:o,type:"file",accept:".xlsx,.xls",style:{display:"none"},onChange:k}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4 w-100 gap-3",children:[e.jsxs("button",{type:"button",onClick:c,className:"btn d-flex align-items-center justify-content-center flex-grow-1",style:{backgroundColor:"#28a745",color:"#fff",border:"none",borderRadius:"12px",padding:"16px 24px",fontSize:"1rem",fontWeight:"600",gap:"12px",boxShadow:"0 4px 15px rgba(40, 167, 69, 0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",minHeight:"56px",position:"relative",overflow:"hidden"},onMouseEnter:n=>{n.currentTarget.style.backgroundColor="#218838",n.currentTarget.style.transform="translateY(-2px)",n.currentTarget.style.boxShadow="0 8px 25px rgba(40, 167, 69, 0.4)"},onMouseLeave:n=>{n.currentTarget.style.backgroundColor="#28a745",n.currentTarget.style.transform="translateY(0)",n.currentTarget.style.boxShadow="0 4px 15px rgba(40, 167, 69, 0.3)"},title:"Cargar plantilla Excel",children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"6px",padding:"4px"},children:e.jsx("i",{className:"fas fa-file-excel",style:{fontSize:"14px"}})}),e.jsx("span",{children:"Importar Plantilla Excel"})]}),e.jsxs("button",{type:"button",onClick:b,className:"btn d-flex align-items-center justify-content-center",style:{backgroundColor:"#0d6efd",color:"#fff",border:"none",borderRadius:"12px",padding:"16px 24px",fontSize:"1rem",fontWeight:"600",gap:"12px",boxShadow:"0 4px 15px rgba(13, 110, 253, 0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",minHeight:"56px",position:"relative",overflow:"hidden",minWidth:"200px"},onMouseEnter:n=>{n.currentTarget.style.backgroundColor="#0b5ed7",n.currentTarget.style.transform="translateY(-2px)",n.currentTarget.style.boxShadow="0 8px 25px rgba(13, 110, 253, 0.4)"},onMouseLeave:n=>{n.currentTarget.style.backgroundColor="#0d6efd",n.currentTarget.style.transform="translateY(0)",n.currentTarget.style.boxShadow="0 4px 15px rgba(13, 110, 253, 0.3)"},title:"Descargar plantilla Excel",children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"6px",padding:"4px"},children:e.jsx("i",{className:"fas fa-download",style:{fontSize:"14px"}})}),e.jsx("span",{children:"Descargar Plantilla"})]})]})]})},We=()=>{const[t,o]=N.useState(""),[,c]=N.useState({}),[b,f]=N.useState(!0),{usuario:l,loading:m,isAuthenticated:j}=Oe(),{programas:x,loading:k,obtenerProgramaPorId:n,obtenerPuntajeMaximo:r}=Te(l?.programa_id),{preguntas:s,setPreguntas:a,agregarPregunta:u,eliminarPregunta:R,actualizarPregunta:z,actualizarPeso:T,actualizarOrientacion:y,actualizarOpcion:g,agregarOpcion:d,eliminarOpcion:i,manejarImagenPregunta:p,manejarImagenOpcion:h,eliminarImagenOpcion:S,handleDragOver:C,handleDrop:_,calcularPuntajeTotal:v,tieneImagenes:M,inicializar:X}=Ae(),{loading:ie,submitForm:ce}=ke(),{register:le,handleSubmit:de,formState:{errors:me},setValue:ee,watch:ue}=je({mode:"onChange",defaultValues:{titulo:"",programaId:""}}),U=v(),ge=n(t),B=r(t);N.useEffect(()=>{j&&s.length===0&&X()},[j,s.length,X]),N.useEffect(()=>{if(!l?.programa_id)return;const w=String(l.programa_id);o(w),ee("programaId",w)},[l?.programa_id,ee]);const K=ue("programaId");N.useEffect(()=>{K!==void 0&&o(K||"")},[K]);const te=de(async w=>{await ce(w.titulo,w.descripcion,w.programaId,s,U,B,M(),c)}),fe=()=>{f(w=>!w)},pe=async w=>{try{const P=async(O,W)=>{try{if(!O||typeof O!="string"||!(O.startsWith("http://")||O.startsWith("https://")||O.startsWith("data:")))return null;const G=I=>{try{const H=new URL(I),$=H.hostname.toLowerCase();if($==="imgur.com"||$.endsWith(".imgur.com")){const ae=H.pathname.replace(/^\//,"").split(/[.#?]/)[0];return ae?[".jpg",".png",".jpeg",".webp"].map(be=>`https://i.imgur.com/${ae}${be}`):[I]}return[I]}catch{return[I]}},q=O.startsWith("data:")?[O]:G(O);let D=null;for(const I of q)try{if(D=await fetch(I,{mode:I.startsWith("data:")?"no-cors":"cors"}),D&&D.ok){O=I;break}}catch{}if(!D||!D.ok)return null;const L=await D.blob(),re=W&&typeof W=="string"&&W.trim()!==""?W:"imagen_"+Date.now(),xe=(I,H)=>{const $=I.toLowerCase();return $.endsWith(".png")?"image/png":$.endsWith(".jpg")||$.endsWith(".jpeg")?"image/jpeg":$.endsWith(".webp")?"image/webp":$.endsWith(".gif")?"image/gif":H},he=L.type&&L.type.startsWith("image/")?L.type:xe(re||String(O),"image/jpeg");return new File([L],re,{type:he})}catch{return null}},E=w?.preguntas||[],F=await Promise.all(E.map(async O=>{const W=await P(O.imagen_pregunta,O.imagen_pregunta_nombre),V=await Promise.all((O.opciones||[]).map(async(G,q)=>({texto:G.texto??"",imagen:await P(G.imagen_opcion,`opcion_${q+1}.png`)})));return{texto:O.texto??"",opciones:V,correcta:Number.isFinite(O.correcta)?Math.min(Math.max(Math.trunc(O.correcta),0),Math.max(0,V.length-1)):null,peso:Number.isFinite(O.peso)?O.peso:0,imagen:W,orientacion:1}}));if(F.length===0){await A.fire({icon:"warning",title:"Archivo sin preguntas",text:"No se encontraron preguntas válidas en la plantilla."});return}a(F),await A.fire({icon:"success",title:"Importación completa",text:`Se importaron ${F.length} pregunta(s).`,timer:1800,showConfirmButton:!1})}catch{await A.fire({icon:"error",title:"Error al importar",text:"No se pudieron importar las preguntas. Verifica la plantilla."})}};return m||k||ie?e.jsx(ne,{children:e.jsx("div",{className:"container-fluid py-3",style:{backgroundColor:"#f8f9fa",minHeight:"100vh"},children:e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-12 col-xl-10",children:e.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{minHeight:"70vh"},children:e.jsx("div",{className:"text-center",children:e.jsx("h2",{style:{color:"#0f172a",fontSize:"1.5rem",marginBottom:"1rem"},children:"Cargando..."})})})})})})}):e.jsx(ne,{children:e.jsx("div",{className:"container-fluid py-3",style:{backgroundColor:"#f8f9fa",minHeight:"100vh"},children:e.jsx("div",{className:"row justify-content-center",children:e.jsxs("div",{className:"col-12 col-xl-10",children:[e.jsx(we,{}),e.jsx(Re,{onImport:pe}),e.jsxs("form",{onSubmit:w=>{w.preventDefault(),te()},encType:"multipart/form-data",children:[e.jsx("div",{className:"card border-0 shadow-sm mb-4",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsx("h3",{className:"mb-3",style:{color:"#2c3e50",fontSize:"1.4rem"},children:"Información básica"}),e.jsx(Ee,{programas:x,register:le,errors:me,puntajeMaximo:B,programaDisabled:!!l?.programa_id})]})}),e.jsx(Ce,{puntajeTotal:U,puntajeMaximo:B,programaSeleccionado:ge,mostrarDetallePuntaje:b,onToggleDetalle:fe,onCerrarDetalle:()=>f(!1)}),e.jsx("div",{className:"card border-0 shadow-sm",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h3",{className:"mb-0",style:{color:"#2c3e50",fontSize:"1.4rem"},children:"Preguntas *"}),e.jsxs("small",{className:"text-muted",children:[s.length," ",s.length===1?"pregunta":"preguntas"]})]}),s.map((w,P)=>e.jsx(Se,{pregunta:w,preguntaIndex:P,allCollapsed:!0,onEliminarPregunta:()=>R(P),onActualizarPregunta:(E,F)=>z(P,E,F),onActualizarPeso:E=>T(P,E),onActualizarOrientacion:E=>y(P,E),onActualizarOpcion:(E,F)=>g(P,E,F),onAgregarOpcion:()=>d(P),onEliminarOpcion:E=>i(P,E),onImagenPreguntaChange:E=>p(P,E),onEliminarImagenPregunta:()=>z(P,"imagen",null),onImagenOpcionChange:(E,F)=>h(P,E,F),onEliminarImagenOpcion:E=>S(P,E),onDragOver:C,onDropPregunta:E=>_(E,"pregunta",P),onDropOpcion:(E,F)=>_(E,"opcion",P,F)},P)),e.jsxs("button",{type:"button",onClick:u,className:"btn btn-outline-secondary w-100 py-3",style:{borderColor:"#00a19B",color:"#00a19B",fontWeight:"500",fontSize:"1rem",transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.03)"},onMouseOver:w=>{w.currentTarget.style.backgroundColor="#00a19B",w.currentTarget.style.color="white",w.currentTarget.style.transform="translateY(-2px)",w.currentTarget.style.boxShadow="0 8px 30px rgba(0,0,0,0.06)"},onMouseOut:w=>{w.currentTarget.style.backgroundColor="transparent",w.currentTarget.style.color="#00a19B",w.currentTarget.style.transform="translateY(0)",w.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.03)"},children:[e.jsx("i",{className:"fas fa-plus me-2"})," Agregar Nueva Pregunta"]})]})}),e.jsx(Pe,{puntajeTotal:U,puntajeMaximo:B,onSubmit:()=>te()})]})]})})})})};export{We as default};
