import{c as E,j as e,L as g,a as F,r as t,b as T,A as M,O as R}from"./index-BTkTQ1Fh.js";import{h as P,i as H,j as U,k as z,l as q,m as G,n as J,o as V,p as W,F as C,q as K,a as Q,r as X,s as Y,t as Z,u as ee}from"./index-DLtsYAVg.js";import{G as oe}from"./iconBase-QLClNUbn.js";import{u as se}from"./useAuthentication-Dr4csIj7.js";const ae="_sidebar_ey5b3_1",ne="_collapsed_ey5b3_31",te="_expanded_ey5b3_39",re="_logo_ey5b3_47",ie="_logoImage_ey5b3_65",ce="_nav_ey5b3_105",le="_section_ey5b3_117",de="_link_ey5b3_145",me="_active_ey5b3_199",ue="_toggleButton_ey5b3_241",_e="_sidebarMobileOpen_ey5b3_313",a={sidebar:ae,collapsed:ne,expanded:te,logo:re,logoImage:ie,nav:ce,section:le,link:de,active:me,toggleButton:ue,sidebarMobileOpen:_e},xe=()=>{const n=E(),{isExpanded:s,setIsExpanded:r,mobileOpen:i,setMobileOpen:x}=y(),c=m=>n.pathname.startsWith(m)?a.active:"",l=()=>{r(!s)},d=()=>{i&&x(!1)};return e.jsxs("div",{className:`${a.sidebar} ${s?a.expanded:a.collapsed} ${i?a.sidebarMobileOpen:""}`,children:[e.jsxs("div",{className:a.logo,children:[e.jsx("img",{src:"/logo2.svg",alt:"Logo",className:a.logoImage}),s&&e.jsx("span",{children:"NuñezRA"})]}),e.jsxs("nav",{className:a.nav,children:[e.jsx("div",{className:a.section,children:e.jsxs(g,{to:"/dashboard",className:`${a.link} ${c("/dashboard")}`,onClick:d,children:[e.jsx(P,{}),s&&e.jsx("span",{children:"Cuestionarios"})]})}),e.jsxs("div",{className:a.section,children:[e.jsxs(g,{to:"/asignar",className:`${a.link} ${c("/asignar")}`,onClick:d,children:[e.jsx(H,{}),s&&e.jsx("span",{children:"Asignar Cuestionario"})]}),e.jsxs(g,{to:"/periodos",className:`${a.link} ${c("/periodos")}`,onClick:d,children:[e.jsx(U,{}),s&&e.jsx("span",{children:"Periodos"})]})]}),e.jsxs("div",{className:a.section,children:[e.jsxs(g,{to:"/seguimiento",className:`${a.link} ${c("/seguimiento")}`,onClick:d,children:[e.jsx(z,{}),s&&e.jsx("span",{children:"Seguimiento"})]}),e.jsxs(g,{to:"/resultados",className:`${a.link} ${c("/resultados")}`,onClick:d,children:[e.jsx(q,{}),s&&e.jsx("span",{children:"Resultados"})]})]})]}),e.jsx("button",{className:a.toggleButton,onClick:l,"aria-label":s?"Contraer":"Expandir",children:s?e.jsx(G,{}):e.jsx(J,{})})]})};function pe(n){return oe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"},child:[]}]})(n)}const ge="_navbar_75eci_1",he="_container_75eci_25",je="_menuButton_75eci_47",be="_branding_75eci_117",ve="_logo_75eci_165",Ne="_userSection_75eci_179",fe="_userInfo_75eci_201",we="_roleButton_75eci_241",Ce="_dropdownContainer_75eci_351",Ie="_userDropdownButton_75eci_359",ye="_userDropdownIcon_75eci_405",Be="_dropdownArrow_75eci_423",Se="_rotated_75eci_439",ke="_dropdownMenu_75eci_447",Le="_dropdownHeader_75eci_497",De="_userDataRow_75eci_541",$e="_iconColumn_75eci_553",Ae="_dataColumn_75eci_573",Oe="_userNameText_75eci_591",Ee="_userEmailText_75eci_603",Fe="_userRoleText_75eci_615",Te="_userInfoIcon_75eci_629",Me="_dropdownDivider_75eci_651",Re="_dropdownLogoutButton_75eci_663",Pe="_modalOverlay_75eci_961",He="_modalContainer_75eci_1007",Ue="_modalHeader_75eci_1047",ze="_modalIcon_75eci_1063",qe="_modalBody_75eci_1087",Ge="_modalSubtext_75eci_1109",Je="_modalActions_75eci_1121",Ve="_modalCancelButton_75eci_1135",We="_modalConfirmButton_75eci_1171",o={navbar:ge,container:he,menuButton:je,branding:be,logo:ve,userSection:Ne,userInfo:fe,roleButton:we,dropdownContainer:Ce,userDropdownButton:Ie,userDropdownIcon:ye,dropdownArrow:Be,rotated:Se,dropdownMenu:ke,dropdownHeader:Le,userDataRow:De,iconColumn:$e,dataColumn:Ae,userNameText:Oe,userEmailText:Ee,userRoleText:Fe,userInfoIcon:Te,dropdownDivider:Me,dropdownLogoutButton:Re,modalOverlay:Pe,modalContainer:He,modalHeader:Ue,modalIcon:ze,modalBody:qe,modalSubtext:Ge,modalActions:Je,modalCancelButton:Ve,modalConfirmButton:We},Ke=()=>{const n=F(),{user:s,logout:r}=se(),{setMobileOpen:i}=y(),x=s?.rol==="admin",c=s?.rol==="tester",l=s?.rol,d=l===1||l==="1"?"Docente":typeof l=="string"?l:String(l??"Docente"),[m,h]=t.useState(!1),[B,N]=t.useState(!1),j=t.useRef(null),[b,S]=t.useState(s?.programa??null),[k,f]=t.useState(!1),L=async()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),await r(),n("/login-docente")},D=()=>{N(!0),h(!1)},$=()=>{N(!1)};t.useEffect(()=>{const v=p=>{j.current&&!j.current.contains(p.target)&&h(!1)};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[]);const A=()=>{h(!m)};t.useEffect(()=>{m&&!b&&(async()=>{try{f(!0);const p=s?.programa_id;if(p==null)return;const{data:u}=await T.get(M.programas.base),w=u?.data?.programa?.[0]?.nombre||u?.data?.programa?.nombre||u?.programa?.[0]?.nombre||u?.programa?.nombre||u?.data?.programas?.[0]?.nombre||u?.data?.nombre||u?.nombre||null;w&&S(String(w))}catch{}finally{f(!1)}})()},[m,b,s]);const O=s?.programa_id!==null&&s?.programa_id!==void 0&&(b||s?.programa?.nombre||s?.programa)||null;return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:o.navbar,children:e.jsxs("div",{className:o.container,children:[e.jsx("button",{className:o.menuButton,onClick:()=>i(!0),"aria-label":"Abrir menú",children:e.jsx(pe,{})}),e.jsx("div",{className:o.branding,children:e.jsx("img",{src:"/logo.svg",alt:"Logo",className:o.logo})}),e.jsxs("div",{className:o.userSection,children:[x&&e.jsxs("button",{className:o.roleButton,onClick:()=>n("/admin"),title:"Panel de Administrador",children:[e.jsx(V,{}),e.jsx("span",{children:"Admin"})]}),c&&e.jsxs("button",{className:o.roleButton,onClick:()=>n("/tester"),title:"Panel de Tester",children:[e.jsx(W,{}),e.jsx("span",{children:"Tester"})]}),e.jsxs("div",{className:o.dropdownContainer,ref:j,children:[e.jsxs("button",{onClick:A,className:o.userDropdownButton,title:"Menú de usuario",children:[e.jsx(C,{className:o.userDropdownIcon}),e.jsx(K,{className:`${o.dropdownArrow} ${m?o.rotated:""}`})]}),m&&e.jsxs("div",{className:o.dropdownMenu,children:[e.jsx("div",{className:o.dropdownHeader,children:e.jsx("div",{className:o.userInfo,children:e.jsxs("div",{className:o.userDataRow,children:[e.jsxs("div",{className:o.iconColumn,children:[e.jsx(C,{className:o.userInfoIcon}),e.jsx(Q,{className:o.userInfoIcon}),e.jsx(X,{className:o.userInfoIcon}),e.jsx(Y,{className:o.userInfoIcon})]}),e.jsxs("div",{className:o.dataColumn,children:[e.jsx("span",{className:o.userNameText,children:s?.nombre}),e.jsx("span",{className:o.userEmailText,children:s?.email}),e.jsx("span",{className:o.userEmailText,children:k?"Cargando programa…":O||"Sin programa"}),e.jsx("span",{className:o.userRoleText,children:d})]})]})})}),e.jsx("div",{className:o.dropdownDivider}),e.jsxs("button",{onClick:D,className:o.dropdownLogoutButton,children:[e.jsx(Z,{}),e.jsx("span",{children:"Cerrar sesión"})]})]})]})]})]})}),B&&e.jsx("div",{className:o.modalOverlay,children:e.jsxs("div",{className:o.modalContainer,children:[e.jsxs("div",{className:o.modalHeader,children:[e.jsx(ee,{className:o.modalIcon}),e.jsx("h3",{children:"Confirmar cierre de sesión"})]}),e.jsxs("div",{className:o.modalBody,children:[e.jsx("p",{children:"¿Estás seguro de que deseas cerrar sesión?"}),e.jsx("p",{className:o.modalSubtext,children:"Serás redirigido a la página de inicio de sesión."})]}),e.jsxs("div",{className:o.modalActions,children:[e.jsx("button",{onClick:L,className:o.modalConfirmButton,children:"Cerrar sesión"}),e.jsx("button",{onClick:$,className:o.modalCancelButton,children:"Cancelar"})]})]})})]})},Qe="_layout_1t3f5_1",Xe="_mainContainer_1t3f5_15",Ye="_expanded_1t3f5_35",Ze="_collapsed_1t3f5_45",eo="_main_1t3f5_15",oo="_overlay_1t3f5_81",so="_show_1t3f5_101",_={layout:Qe,mainContainer:Xe,expanded:Ye,collapsed:Ze,main:eo,overlay:oo,show:so},I=t.createContext(void 0),y=()=>{const n=t.useContext(I);if(!n)throw new Error("useSidebar debe ser usado dentro de DashboardLayout");return n},co=()=>{const[n,s]=t.useState(()=>{try{const x=localStorage.getItem("sidebar_expanded");return x==null?!0:JSON.parse(x)===!0}catch{return!0}}),[r,i]=t.useState(!1);return t.useEffect(()=>{try{localStorage.setItem("sidebar_expanded",JSON.stringify(n))}catch{}},[n]),e.jsx(I.Provider,{value:{isExpanded:n,setIsExpanded:s,mobileOpen:r,setMobileOpen:i},children:e.jsxs("div",{className:_.layout,children:[e.jsx(xe,{}),e.jsx("div",{className:`${_.overlay} ${r?_.show:""}`,onClick:()=>i(!1),"aria-hidden":!r}),e.jsxs("div",{className:`${_.mainContainer} ${n?_.expanded:_.collapsed}`,children:[e.jsx(Ke,{}),e.jsx("main",{className:_.main,children:e.jsx(R,{})})]})]})})};export{co as default,y as useSidebar};
