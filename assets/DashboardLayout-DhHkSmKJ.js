import{c as B,j as o,L as c,a as S,r as t,O as D}from"./index-DaOhVVWd.js";import{h as y,i as L,j as $,k,l as A,m as E,n as F,o as T,p as R,F as j,q as O,a as H,r as M,s as P,t as U}from"./index-B8Flq_4W.js";import{u as q}from"./useAuthentication-Dn9EKM7N.js";import"./iconBase-Cr-ff6zs.js";const J="_sidebar_p1491_1",z="_collapsed_p1491_15",W="_expanded_p1491_19",G="_logo_p1491_23",K="_logoImage_p1491_32",Q="_nav_p1491_52",V="_section_p1491_58",X="_link_p1491_72",Y="_active_p1491_99",Z="_toggleButton_p1491_120",n={sidebar:J,collapsed:z,expanded:W,logo:G,logoImage:K,nav:Q,section:V,link:X,active:Y,toggleButton:Z},oo=()=>{const a=B(),{isExpanded:e,setIsExpanded:l}=Mo(),r=d=>a.pathname.startsWith(d)?n.active:"",u=()=>{l(!e)};return o.jsxs("div",{className:`${n.sidebar} ${e?n.expanded:n.collapsed}`,children:[o.jsxs("div",{className:n.logo,children:[o.jsx("img",{src:"/logo2.svg",alt:"Logo",className:n.logoImage}),e&&o.jsx("span",{children:"NunezRA"})]}),o.jsxs("nav",{className:n.nav,children:[o.jsx("div",{className:n.section,children:o.jsxs(c,{to:"/dashboard",className:`${n.link} ${r("/dashboard")}`,children:[o.jsx(y,{}),e&&o.jsx("span",{children:"Cuestionarios"})]})}),o.jsxs("div",{className:n.section,children:[o.jsxs(c,{to:"/asignar",className:`${n.link} ${r("/asignar")}`,children:[o.jsx(L,{}),e&&o.jsx("span",{children:"Asignar Cuestionario"})]}),o.jsxs(c,{to:"/periodos",className:`${n.link} ${r("/periodos")}`,children:[o.jsx($,{}),e&&o.jsx("span",{children:"Periodos"})]})]}),o.jsxs("div",{className:n.section,children:[o.jsxs(c,{to:"/seguimiento",className:`${n.link} ${r("/seguimiento")}`,children:[o.jsx(k,{}),e&&o.jsx("span",{children:"Seguimiento"})]}),o.jsxs(c,{to:"/resultados",className:`${n.link} ${r("/resultados")}`,children:[o.jsx(A,{}),e&&o.jsx("span",{children:"Resultados"})]})]})]}),o.jsx("button",{className:n.toggleButton,onClick:u,"aria-label":e?"Contraer":"Expandir",children:e?o.jsx(E,{}):o.jsx(F,{})})]})},so="_navbar_togg0_1",eo="_container_togg0_25",no="_branding_togg0_45",ao="_logo_togg0_93",to="_userSection_togg0_107",ro="_userInfo_togg0_129",lo="_roleButton_togg0_169",co="_dropdownContainer_togg0_259",io="_userDropdownButton_togg0_267",uo="_userDropdownIcon_togg0_311",mo="_dropdownArrow_togg0_319",go="_rotated_togg0_329",_o="_dropdownMenu_togg0_337",xo="_dropdownHeader_togg0_387",po="_userDataRow_togg0_431",jo="_iconColumn_togg0_443",ho="_dataColumn_togg0_463",vo="_userNameText_togg0_481",No="_userEmailText_togg0_493",wo="_userRoleText_togg0_505",Co="_userInfoIcon_togg0_519",bo="_dropdownDivider_togg0_541",fo="_dropdownLogoutButton_togg0_553",Io="_modalOverlay_togg0_741",Bo="_modalContainer_togg0_787",So="_modalHeader_togg0_827",Do="_modalIcon_togg0_843",yo="_modalBody_togg0_867",Lo="_modalSubtext_togg0_889",$o="_modalActions_togg0_901",ko="_modalCancelButton_togg0_915",Ao="_modalConfirmButton_togg0_951",s={navbar:so,container:eo,branding:no,logo:ao,userSection:to,userInfo:ro,roleButton:lo,dropdownContainer:co,userDropdownButton:io,userDropdownIcon:uo,dropdownArrow:mo,rotated:go,dropdownMenu:_o,dropdownHeader:xo,userDataRow:po,iconColumn:jo,dataColumn:ho,userNameText:vo,userEmailText:No,userRoleText:wo,userInfoIcon:Co,dropdownDivider:bo,dropdownLogoutButton:fo,modalOverlay:Io,modalContainer:Bo,modalHeader:So,modalIcon:Do,modalBody:yo,modalSubtext:Lo,modalActions:$o,modalCancelButton:ko,modalConfirmButton:Ao},Eo=()=>{const a=S(),{user:e,logout:l}=q(),r=e?.rol==="admin",u=e?.rol==="tester",d=e?.rol,v=d===1||d==="1"?"Docente":typeof d=="string"?d:String(d??"Usuario"),[m,g]=t.useState(!1),[N,x]=t.useState(!1),_=t.useRef(null),w=async()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),await l(),a("/login-docente")},C=()=>{x(!0),g(!1)},b=()=>{x(!1)};t.useEffect(()=>{const p=I=>{_.current&&!_.current.contains(I.target)&&g(!1)};return document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[]);const f=()=>{g(!m)};return o.jsxs(o.Fragment,{children:[o.jsx("nav",{className:s.navbar,children:o.jsxs("div",{className:s.container,children:[o.jsx("div",{className:s.branding,children:o.jsx("img",{src:"/logo.svg",alt:"Logo",className:s.logo})}),o.jsxs("div",{className:s.userSection,children:[r&&o.jsxs("button",{className:s.roleButton,onClick:()=>a("/admin"),title:"Panel de Administrador",children:[o.jsx(T,{}),o.jsx("span",{children:"Admin"})]}),u&&o.jsxs("button",{className:s.roleButton,onClick:()=>a("/tester"),title:"Panel de Tester",children:[o.jsx(R,{}),o.jsx("span",{children:"Tester"})]}),o.jsxs("div",{className:s.dropdownContainer,ref:_,children:[o.jsxs("button",{onClick:f,className:s.userDropdownButton,title:"Menú de usuario",children:[o.jsx(j,{className:s.userDropdownIcon}),o.jsx(O,{className:`${s.dropdownArrow} ${m?s.rotated:""}`})]}),m&&o.jsxs("div",{className:s.dropdownMenu,children:[o.jsx("div",{className:s.dropdownHeader,children:o.jsx("div",{className:s.userInfo,children:o.jsxs("div",{className:s.userDataRow,children:[o.jsxs("div",{className:s.iconColumn,children:[o.jsx(j,{className:s.userInfoIcon}),o.jsx(H,{className:s.userInfoIcon}),o.jsx(M,{className:s.userInfoIcon})]}),o.jsxs("div",{className:s.dataColumn,children:[o.jsx("span",{className:s.userNameText,children:e?.nombre}),o.jsx("span",{className:s.userEmailText,children:e?.email}),o.jsx("span",{className:s.userRoleText,children:v})]})]})})}),o.jsx("div",{className:s.dropdownDivider}),o.jsxs("button",{onClick:C,className:s.dropdownLogoutButton,children:[o.jsx(P,{}),o.jsx("span",{children:"Cerrar sesión"})]})]})]})]})]})}),N&&o.jsx("div",{className:s.modalOverlay,children:o.jsxs("div",{className:s.modalContainer,children:[o.jsxs("div",{className:s.modalHeader,children:[o.jsx(U,{className:s.modalIcon}),o.jsx("h3",{children:"Confirmar cierre de sesión"})]}),o.jsxs("div",{className:s.modalBody,children:[o.jsx("p",{children:"¿Estás seguro de que deseas cerrar sesión?"}),o.jsx("p",{className:s.modalSubtext,children:"Serás redirigido a la página de inicio de sesión."})]}),o.jsxs("div",{className:s.modalActions,children:[o.jsx("button",{onClick:b,className:s.modalCancelButton,children:"Cancelar"}),o.jsx("button",{onClick:w,className:s.modalConfirmButton,children:"Cerrar sesión"})]})]})})]})},Fo="_layout_1dtjg_1",To="_mainContainer_1dtjg_8",Ro="_expanded_1dtjg_18",Oo="_collapsed_1dtjg_23",Ho="_main_1dtjg_8",i={layout:Fo,mainContainer:To,expanded:Ro,collapsed:Oo,main:Ho},h=t.createContext(void 0),Mo=()=>{const a=t.useContext(h);if(!a)throw new Error("useSidebar debe ser usado dentro de DashboardLayout");return a},zo=()=>{const[a,e]=t.useState(()=>{try{const l=localStorage.getItem("sidebar_expanded");return l==null?!0:JSON.parse(l)===!0}catch{return!0}});return t.useEffect(()=>{try{localStorage.setItem("sidebar_expanded",JSON.stringify(a))}catch{}},[a]),o.jsx(h.Provider,{value:{isExpanded:a,setIsExpanded:e},children:o.jsxs("div",{className:i.layout,children:[o.jsx(oo,{}),o.jsxs("div",{className:`${i.mainContainer} ${a?i.expanded:i.collapsed}`,children:[o.jsx(Eo,{}),o.jsx("main",{className:i.main,children:o.jsx(D,{})})]})]})})};export{zo as default,Mo as useSidebar};
