import{c as T,j as e,L as p,a as F,r,b as M,A as R,O as P}from"./index-DAGB5OzC.js";import{h as H,i as U,j as z,k as q,l as G,m as J,n as V,o as W,p as K,F as I,q as Q,a as X,r as Y,s as Z,t as ee,u as oe}from"./index-7f3zIO5d.js";import{G as se}from"./iconBase-CYzjdnYU.js";import{u as ae}from"./useAuthentication-Ky9h1RTe.js";const ne="_sidebar_ey5b3_1",te="_collapsed_ey5b3_31",re="_expanded_ey5b3_39",ie="_logo_ey5b3_47",ce="_logoImage_ey5b3_65",le="_nav_ey5b3_105",de="_section_ey5b3_117",me="_link_ey5b3_145",ue="_active_ey5b3_199",_e="_toggleButton_ey5b3_241",xe="_sidebarMobileOpen_ey5b3_313",n={sidebar:ne,collapsed:te,expanded:re,logo:ie,logoImage:ce,nav:le,section:de,link:me,active:ue,toggleButton:_e,sidebarMobileOpen:xe},pe=()=>{const t=T(),{isExpanded:s,setIsExpanded:c,mobileOpen:l,setMobileOpen:a}=B(),i=h=>t.pathname.startsWith(h)?n.active:"",g=()=>{c(!s)},d=()=>{l&&a(!1)};return e.jsxs("div",{className:`${n.sidebar} ${s?n.expanded:n.collapsed} ${l?n.sidebarMobileOpen:""}`,children:[e.jsxs("div",{className:n.logo,children:[e.jsx("img",{src:"/logo2.svg",alt:"Logo",className:n.logoImage}),s&&e.jsx("span",{children:"NuñezRA"})]}),e.jsxs("nav",{className:n.nav,children:[e.jsx("div",{className:n.section,children:e.jsxs(p,{to:"/dashboard",className:`${n.link} ${i("/dashboard")}`,onClick:d,children:[e.jsx(H,{}),s&&e.jsx("span",{children:"Cuestionarios"})]})}),e.jsxs("div",{className:n.section,children:[e.jsxs(p,{to:"/asignar",className:`${n.link} ${i("/asignar")}`,onClick:d,children:[e.jsx(U,{}),s&&e.jsx("span",{children:"Asignar Cuestionario"})]}),e.jsxs(p,{to:"/periodos",className:`${n.link} ${i("/periodos")}`,onClick:d,children:[e.jsx(z,{}),s&&e.jsx("span",{children:"Periodos"})]})]}),e.jsxs("div",{className:n.section,children:[e.jsxs(p,{to:"/seguimiento",className:`${n.link} ${i("/seguimiento")}`,onClick:d,children:[e.jsx(q,{}),s&&e.jsx("span",{children:"Seguimiento"})]}),e.jsxs(p,{to:"/resultados",className:`${n.link} ${i("/resultados")}`,onClick:d,children:[e.jsx(G,{}),s&&e.jsx("span",{children:"Resultados"})]})]})]}),e.jsx("button",{className:n.toggleButton,onClick:g,"aria-label":s?"Contraer":"Expandir",children:s?e.jsx(J,{}):e.jsx(V,{})})]})};function ge(t){return se({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"},child:[]}]})(t)}const he="_navbar_75eci_1",je="_container_75eci_25",be="_menuButton_75eci_47",ve="_branding_75eci_117",Ne="_logo_75eci_165",fe="_userSection_75eci_179",we="_userInfo_75eci_201",Ce="_roleButton_75eci_241",Ie="_dropdownContainer_75eci_351",ye="_userDropdownButton_75eci_359",Be="_userDropdownIcon_75eci_405",Se="_dropdownArrow_75eci_423",ke="_rotated_75eci_439",De="_dropdownMenu_75eci_447",Ee="_dropdownHeader_75eci_497",Le="_userDataRow_75eci_541",Ae="_iconColumn_75eci_553",Oe="_dataColumn_75eci_573",$e="_userNameText_75eci_591",Te="_userEmailText_75eci_603",Fe="_userRoleText_75eci_615",Me="_userInfoIcon_75eci_629",Re="_dropdownDivider_75eci_651",Pe="_dropdownLogoutButton_75eci_663",He="_modalOverlay_75eci_961",Ue="_modalContainer_75eci_1007",ze="_modalHeader_75eci_1047",qe="_modalIcon_75eci_1063",Ge="_modalBody_75eci_1087",Je="_modalSubtext_75eci_1109",Ve="_modalActions_75eci_1121",We="_modalCancelButton_75eci_1135",Ke="_modalConfirmButton_75eci_1171",o={navbar:he,container:je,menuButton:be,branding:ve,logo:Ne,userSection:fe,userInfo:we,roleButton:Ce,dropdownContainer:Ie,userDropdownButton:ye,userDropdownIcon:Be,dropdownArrow:Se,rotated:ke,dropdownMenu:De,dropdownHeader:Ee,userDataRow:Le,iconColumn:Ae,dataColumn:Oe,userNameText:$e,userEmailText:Te,userRoleText:Fe,userInfoIcon:Me,dropdownDivider:Re,dropdownLogoutButton:Pe,modalOverlay:He,modalContainer:Ue,modalHeader:ze,modalIcon:qe,modalBody:Ge,modalSubtext:Je,modalActions:Ve,modalCancelButton:We,modalConfirmButton:Ke},Qe=()=>{const t=F(),{user:s,logout:c}=ae(),{setMobileOpen:l}=B(),a=s?.rol??s?.rol_user??void 0,i=a===0||a==="0"||a==="admin"||a==="ADMIN",g=a===1||a==="1"||a==="docente"||a==="DOCENTE",d=a==="tester"||a==="TESTER",h=i?"Admin":g?"Docente":typeof a=="string"?a:"Docente",[_,j]=r.useState(!1),[S,f]=r.useState(!1),b=r.useRef(null),[v,k]=r.useState(s?.programa??null),[D,w]=r.useState(!1),E=async()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),await c(),t("/login-docente")},L=()=>{f(!0),j(!1)},A=()=>{f(!1)};r.useEffect(()=>{const N=x=>{b.current&&!b.current.contains(x.target)&&j(!1)};return document.addEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}},[]);const O=()=>{j(!_)};r.useEffect(()=>{_&&!v&&(async()=>{try{w(!0);const x=s?.programa_id;if(x==null)return;const{data:m}=await M.get(R.programas.base),C=m?.data?.programa?.[0]?.nombre||m?.data?.programa?.nombre||m?.programa?.[0]?.nombre||m?.programa?.nombre||m?.data?.programas?.[0]?.nombre||m?.data?.nombre||m?.nombre||null;C&&k(String(C))}catch{}finally{w(!1)}})()},[_,v,s]);const $=s?.programa_id!==null&&s?.programa_id!==void 0&&(v||s?.programa?.nombre||s?.programa)||null;return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:o.navbar,children:e.jsxs("div",{className:o.container,children:[e.jsx("button",{className:o.menuButton,onClick:()=>l(!0),"aria-label":"Abrir menú",children:e.jsx(ge,{})}),e.jsx("div",{className:o.branding,children:e.jsx("img",{src:"/logo.svg",alt:"Logo",className:o.logo})}),e.jsxs("div",{className:o.userSection,children:[i&&e.jsxs("button",{className:o.roleButton,onClick:()=>t("/admin"),title:"Panel de Administrador",children:[e.jsx(W,{}),e.jsx("span",{children:"Admin"})]}),d&&e.jsxs("button",{className:o.roleButton,onClick:()=>t("/tester"),title:"Panel de Tester",children:[e.jsx(K,{}),e.jsx("span",{children:"Tester"})]}),e.jsxs("div",{className:o.dropdownContainer,ref:b,children:[e.jsxs("button",{onClick:O,className:o.userDropdownButton,title:"Menú de usuario",children:[e.jsx(I,{className:o.userDropdownIcon}),e.jsx(Q,{className:`${o.dropdownArrow} ${_?o.rotated:""}`})]}),_&&e.jsxs("div",{className:o.dropdownMenu,children:[e.jsx("div",{className:o.dropdownHeader,children:e.jsx("div",{className:o.userInfo,children:e.jsxs("div",{className:o.userDataRow,children:[e.jsxs("div",{className:o.iconColumn,children:[e.jsx(I,{className:o.userInfoIcon}),e.jsx(X,{className:o.userInfoIcon}),e.jsx(Y,{className:o.userInfoIcon}),e.jsx(Z,{className:o.userInfoIcon})]}),e.jsxs("div",{className:o.dataColumn,children:[e.jsx("span",{className:o.userNameText,children:s?.nombre}),e.jsx("span",{className:o.userEmailText,children:s?.email}),e.jsx("span",{className:o.userEmailText,children:D?"Cargando programa…":$||"Sin programa"}),e.jsx("span",{className:o.userRoleText,children:h})]})]})})}),e.jsx("div",{className:o.dropdownDivider}),e.jsxs("button",{onClick:L,className:o.dropdownLogoutButton,children:[e.jsx(ee,{}),e.jsx("span",{children:"Cerrar sesión"})]})]})]})]})]})}),S&&e.jsx("div",{className:o.modalOverlay,children:e.jsxs("div",{className:o.modalContainer,children:[e.jsxs("div",{className:o.modalHeader,children:[e.jsx(oe,{className:o.modalIcon}),e.jsx("h3",{children:"Confirmar cierre de sesión"})]}),e.jsxs("div",{className:o.modalBody,children:[e.jsx("p",{children:"¿Estás seguro de que deseas cerrar sesión?"}),e.jsx("p",{className:o.modalSubtext,children:"Serás redirigido a la página de inicio de sesión."})]}),e.jsxs("div",{className:o.modalActions,children:[e.jsx("button",{onClick:E,className:o.modalConfirmButton,children:"Cerrar sesión"}),e.jsx("button",{onClick:A,className:o.modalCancelButton,children:"Cancelar"})]})]})})]})},Xe="_layout_1t3f5_1",Ye="_mainContainer_1t3f5_15",Ze="_expanded_1t3f5_35",eo="_collapsed_1t3f5_45",oo="_main_1t3f5_15",so="_overlay_1t3f5_81",ao="_show_1t3f5_101",u={layout:Xe,mainContainer:Ye,expanded:Ze,collapsed:eo,main:oo,overlay:so,show:ao},y=r.createContext(void 0),B=()=>{const t=r.useContext(y);if(!t)throw new Error("useSidebar debe ser usado dentro de DashboardLayout");return t},lo=()=>{const[t,s]=r.useState(()=>{try{const a=localStorage.getItem("sidebar_expanded");return a==null?!0:JSON.parse(a)===!0}catch{return!0}}),[c,l]=r.useState(!1);return r.useEffect(()=>{try{localStorage.setItem("sidebar_expanded",JSON.stringify(t))}catch{}},[t]),e.jsx(y.Provider,{value:{isExpanded:t,setIsExpanded:s,mobileOpen:c,setMobileOpen:l},children:e.jsxs("div",{className:u.layout,children:[e.jsx(pe,{}),e.jsx("div",{className:`${u.overlay} ${c?u.show:""}`,onClick:()=>l(!1),"aria-hidden":!c}),e.jsxs("div",{className:`${u.mainContainer} ${t?u.expanded:u.collapsed}`,children:[e.jsx(Qe,{}),e.jsx("main",{className:u.main,children:e.jsx(P,{})})]})]})})};export{lo as default,B as useSidebar};
