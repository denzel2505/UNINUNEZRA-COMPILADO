import{c as S,j as o,L as x,a as y,r as a,O as D}from"./index-D_5yPiNa.js";import{h as L,i as $,j as O,k as A,l as E,m as F,n as M,o as T,p as R,F as g,q as H,a as P,r as z,s as U,t as q}from"./index-BCRNc57j.js";import{G}from"./iconBase-DP8UkxFN.js";import{u as J}from"./useAuthentication-ByJgdbzj.js";const V="_sidebar_tws5j_1",W="_collapsed_tws5j_16",K="_expanded_tws5j_20",Q="_logo_tws5j_24",X="_logoImage_tws5j_33",Y="_nav_tws5j_53",Z="_section_tws5j_59",oo="_link_tws5j_73",eo="_active_tws5j_100",so="_toggleButton_tws5j_121",no="_sidebarMobileOpen_tws5j_157",n={sidebar:V,collapsed:W,expanded:K,logo:Q,logoImage:X,nav:Y,section:Z,link:oo,active:eo,toggleButton:so,sidebarMobileOpen:no},to=()=>{const t=S(),{isExpanded:s,setIsExpanded:r,mobileOpen:l,setMobileOpen:m}=N(),d=_=>t.pathname.startsWith(_)?n.active:"",c=()=>{r(!s)},i=()=>{l&&m(!1)};return o.jsxs("div",{className:`${n.sidebar} ${s?n.expanded:n.collapsed} ${l?n.sidebarMobileOpen:""}`,children:[o.jsxs("div",{className:n.logo,children:[o.jsx("img",{src:"/logo2.svg",alt:"Logo",className:n.logoImage}),s&&o.jsx("span",{children:"NuñezRA"})]}),o.jsxs("nav",{className:n.nav,children:[o.jsx("div",{className:n.section,children:o.jsxs(x,{to:"/dashboard",className:`${n.link} ${d("/dashboard")}`,onClick:i,children:[o.jsx(L,{}),s&&o.jsx("span",{children:"Cuestionarios"})]})}),o.jsxs("div",{className:n.section,children:[o.jsxs(x,{to:"/asignar",className:`${n.link} ${d("/asignar")}`,onClick:i,children:[o.jsx($,{}),s&&o.jsx("span",{children:"Asignar Cuestionario"})]}),o.jsxs(x,{to:"/periodos",className:`${n.link} ${d("/periodos")}`,onClick:i,children:[o.jsx(O,{}),s&&o.jsx("span",{children:"Periodos"})]})]}),o.jsxs("div",{className:n.section,children:[o.jsxs(x,{to:"/seguimiento",className:`${n.link} ${d("/seguimiento")}`,onClick:i,children:[o.jsx(A,{}),s&&o.jsx("span",{children:"Seguimiento"})]}),o.jsxs(x,{to:"/resultados",className:`${n.link} ${d("/resultados")}`,onClick:i,children:[o.jsx(E,{}),s&&o.jsx("span",{children:"Resultados"})]})]})]}),o.jsx("button",{className:n.toggleButton,onClick:c,"aria-label":s?"Contraer":"Expandir",children:s?o.jsx(F,{}):o.jsx(M,{})})]})};function ao(t){return G({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"},child:[]}]})(t)}const ro="_navbar_1v35t_1",lo="_container_1v35t_13",co="_menuButton_1v35t_24",io="_branding_1v35t_59",uo="_logo_1v35t_83",mo="_userSection_1v35t_90",_o="_userInfo_1v35t_101",xo="_roleButton_1v35t_121",po="_dropdownContainer_1v35t_176",vo="_userDropdownButton_1v35t_180",jo="_userDropdownIcon_1v35t_203",ho="_dropdownArrow_1v35t_212",go="_rotated_1v35t_220",wo="_dropdownMenu_1v35t_224",No="_dropdownHeader_1v35t_249",Co="_userDataRow_1v35t_271",bo="_iconColumn_1v35t_277",fo="_dataColumn_1v35t_287",Io="_userNameText_1v35t_296",Bo="_userEmailText_1v35t_302",ko="_userRoleText_1v35t_308",So="_userInfoIcon_1v35t_315",yo="_dropdownDivider_1v35t_326",Do="_dropdownLogoutButton_1v35t_332",Lo="_modalOverlay_1v35t_481",$o="_modalContainer_1v35t_504",Oo="_modalHeader_1v35t_524",Ao="_modalIcon_1v35t_532",Eo="_modalBody_1v35t_544",Fo="_modalSubtext_1v35t_555",Mo="_modalActions_1v35t_561",To="_modalCancelButton_1v35t_568",Ro="_modalConfirmButton_1v35t_586",e={navbar:ro,container:lo,menuButton:co,branding:io,logo:uo,userSection:mo,userInfo:_o,roleButton:xo,dropdownContainer:po,userDropdownButton:vo,userDropdownIcon:jo,dropdownArrow:ho,rotated:go,dropdownMenu:wo,dropdownHeader:No,userDataRow:Co,iconColumn:bo,dataColumn:fo,userNameText:Io,userEmailText:Bo,userRoleText:ko,userInfoIcon:So,dropdownDivider:yo,dropdownLogoutButton:Do,modalOverlay:Lo,modalContainer:$o,modalHeader:Oo,modalIcon:Ao,modalBody:Eo,modalSubtext:Fo,modalActions:Mo,modalCancelButton:To,modalConfirmButton:Ro},Ho=()=>{const t=y(),{user:s,logout:r}=J(),{setMobileOpen:l}=N(),m=s?.rol==="admin",d=s?.rol==="tester",c=s?.rol,i=c===1||c==="1"?"Docente":typeof c=="string"?c:String(c??"Docente"),[_,p]=a.useState(!1),[C,j]=a.useState(!1),v=a.useRef(null),b=async()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),await r(),t("/login-docente")},f=()=>{j(!0),p(!1)},I=()=>{j(!1)};a.useEffect(()=>{const h=k=>{v.current&&!v.current.contains(k.target)&&p(!1)};return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[]);const B=()=>{p(!_)};return o.jsxs(o.Fragment,{children:[o.jsx("nav",{className:e.navbar,children:o.jsxs("div",{className:e.container,children:[o.jsx("button",{className:e.menuButton,onClick:()=>l(!0),"aria-label":"Abrir menú",children:o.jsx(ao,{})}),o.jsx("div",{className:e.branding,children:o.jsx("img",{src:"/logo.svg",alt:"Logo",className:e.logo})}),o.jsxs("div",{className:e.userSection,children:[m&&o.jsxs("button",{className:e.roleButton,onClick:()=>t("/admin"),title:"Panel de Administrador",children:[o.jsx(T,{}),o.jsx("span",{children:"Admin"})]}),d&&o.jsxs("button",{className:e.roleButton,onClick:()=>t("/tester"),title:"Panel de Tester",children:[o.jsx(R,{}),o.jsx("span",{children:"Tester"})]}),o.jsxs("div",{className:e.dropdownContainer,ref:v,children:[o.jsxs("button",{onClick:B,className:e.userDropdownButton,title:"Menú de usuario",children:[o.jsx(g,{className:e.userDropdownIcon}),o.jsx(H,{className:`${e.dropdownArrow} ${_?e.rotated:""}`})]}),_&&o.jsxs("div",{className:e.dropdownMenu,children:[o.jsx("div",{className:e.dropdownHeader,children:o.jsx("div",{className:e.userInfo,children:o.jsxs("div",{className:e.userDataRow,children:[o.jsxs("div",{className:e.iconColumn,children:[o.jsx(g,{className:e.userInfoIcon}),o.jsx(P,{className:e.userInfoIcon}),o.jsx(z,{className:e.userInfoIcon})]}),o.jsxs("div",{className:e.dataColumn,children:[o.jsx("span",{className:e.userNameText,children:s?.nombre}),o.jsx("span",{className:e.userEmailText,children:s?.email}),o.jsx("span",{className:e.userRoleText,children:i})]})]})})}),o.jsx("div",{className:e.dropdownDivider}),o.jsxs("button",{onClick:f,className:e.dropdownLogoutButton,children:[o.jsx(U,{}),o.jsx("span",{children:"Cerrar sesión"})]})]})]})]})]})}),C&&o.jsx("div",{className:e.modalOverlay,children:o.jsxs("div",{className:e.modalContainer,children:[o.jsxs("div",{className:e.modalHeader,children:[o.jsx(q,{className:e.modalIcon}),o.jsx("h3",{children:"Confirmar cierre de sesión"})]}),o.jsxs("div",{className:e.modalBody,children:[o.jsx("p",{children:"¿Estás seguro de que deseas cerrar sesión?"}),o.jsx("p",{className:e.modalSubtext,children:"Serás redirigido a la página de inicio de sesión."})]}),o.jsxs("div",{className:e.modalActions,children:[o.jsx("button",{onClick:b,className:e.modalConfirmButton,children:"Cerrar sesión"}),o.jsx("button",{onClick:I,className:e.modalCancelButton,children:"Cancelar"})]})]})})]})},Po="_layout_x9dnt_1",zo="_mainContainer_x9dnt_8",Uo="_expanded_x9dnt_18",qo="_collapsed_x9dnt_23",Go="_main_x9dnt_8",Jo="_overlay_x9dnt_41",Vo="_show_x9dnt_51",u={layout:Po,mainContainer:zo,expanded:Uo,collapsed:qo,main:Go,overlay:Jo,show:Vo},w=a.createContext(void 0),N=()=>{const t=a.useContext(w);if(!t)throw new Error("useSidebar debe ser usado dentro de DashboardLayout");return t},Yo=()=>{const[t,s]=a.useState(()=>{try{const m=localStorage.getItem("sidebar_expanded");return m==null?!0:JSON.parse(m)===!0}catch{return!0}}),[r,l]=a.useState(!1);return a.useEffect(()=>{try{localStorage.setItem("sidebar_expanded",JSON.stringify(t))}catch{}},[t]),o.jsx(w.Provider,{value:{isExpanded:t,setIsExpanded:s,mobileOpen:r,setMobileOpen:l},children:o.jsxs("div",{className:u.layout,children:[o.jsx(to,{}),o.jsx("div",{className:`${u.overlay} ${r?u.show:""}`,onClick:()=>l(!1),"aria-hidden":!r}),o.jsxs("div",{className:`${u.mainContainer} ${t?u.expanded:u.collapsed}`,children:[o.jsx(Ho,{}),o.jsx("main",{className:u.main,children:o.jsx(D,{})})]})]})})};export{Yo as default,N as useSidebar};
