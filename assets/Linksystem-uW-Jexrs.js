import{u as N,r as h,a as f,j as e}from"./index-DaOhVVWd.js";import{P as j}from"./PageTransition-Couod70-.js";import{u as v}from"./useAuthentication-Dn9EKM7N.js";import{F as p,f as y,a as w,g as E,e as F}from"./index-B8Flq_4W.js";import{u as S}from"./index.esm-CM6-cB9y.js";import"./iconBase-Cr-ff6zs.js";const A=()=>{const[r]=N(),{register:n,handleSubmit:b,formState:{errors:s,isSubmitting:i}}=S({defaultValues:{email:"",documento:""}}),[t,d]=h.useState(null),l=f(),{isAuthenticated:o,user:m,studentLogin:x}=v();h.useEffect(()=>{const a=r.get("id");if(a){l(`/realizar-cuestionario/${a}`);return}o&&m?.rol==="estudiante"&&window.location.pathname!=="/estudiante"&&l("/estudiante")},[o,m,l,r]);const g=async a=>{d(null);try{const c=r.get("id"),u=c?`/realizar-cuestionario/${c}`:"/estudiante";typeof x=="function"?await x(a.email,a.documento,u):l(u)}catch(c){d(c?.message||"No se pudo iniciar sesión")}};return t?e.jsx(j,{children:e.jsx("div",{className:"min-vh-100 d-flex align-items-center justify-content-center bg-white py-4",children:e.jsx("div",{className:"container-fluid px-3 px-md-4",children:e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-12 col-lg-10 col-xl-8",children:e.jsxs("div",{className:"card shadow-lg border-0",children:[e.jsxs("div",{className:"card-header bg-danger text-white text-center py-3",children:[e.jsx("div",{className:"mb-2",children:e.jsx("div",{className:"bg-white bg-opacity-25 rounded-circle d-inline-flex align-items-center justify-content-center",style:{width:"50px",height:"50px"},children:e.jsx(p,{size:20})})}),e.jsx("h4",{className:"mb-0 fw-bold",children:"Error de Acceso"}),e.jsx("p",{className:"mb-0 opacity-75 small",children:"Problema con las credenciales"})]}),e.jsxs("div",{className:"card-body p-4 text-center",children:[e.jsx("p",{className:"mb-3",children:t}),e.jsx("p",{className:"text-muted small mb-0",children:"Verifica tus credenciales o contacta a tu docente si tienes problemas para acceder."})]})]})})})})})}):e.jsx(j,{children:e.jsxs("div",{className:"min-vh-100 d-flex align-items-center justify-content-center bg-white py-4",children:[e.jsx("div",{style:{position:"fixed",top:64,right:24,zIndex:1050},children:e.jsx("a",{href:"/elige-rol",className:"btn btn-sm student-back-button",children:"⟵ Volver a selección de rol"})}),e.jsx("div",{className:"container-fluid px-3 px-md-4",children:e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-12 col-lg-10 col-xl-8",children:e.jsx("div",{className:"row g-3 g-md-4",children:e.jsx("div",{className:"col-12",style:{maxWidth:400,minWidth:420,margin:"0 auto"},children:e.jsxs("div",{className:"card shadow-lg border-0 h-100",children:[e.jsxs("div",{className:"card-header text-white text-center py-3 student-login-header",children:[e.jsx("div",{className:"mb-2",children:e.jsx("div",{className:"bg-white bg-opacity-25 rounded-circle d-inline-flex align-items-center justify-content-center",style:{width:"50px",height:"50px"},children:e.jsx(y,{size:20})})}),e.jsx("h4",{className:"mb-0 fw-bold",children:"Acceso Estudiantes"}),e.jsx("p",{className:"mb-0 opacity-75 small",children:"Ingresa tus credenciales institucionales"})]}),e.jsxs("div",{className:"card-body p-3 p-md-4 p-lg-5",children:[e.jsxs("form",{onSubmit:b(g),children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label fw-semibold small",children:[e.jsx(w,{className:"me-2"}),"Correo Electrónico Institucional"]}),e.jsx("input",{type:"email",className:`form-control ${s.email?"is-invalid":""}`,disabled:i,...n("email",{required:"El correo es requerido",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Ingrese un correo válido"}}),placeholder:"ejemplo@email.com"}),s.email&&e.jsx("div",{className:"invalid-feedback d-block small",children:s.email.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label fw-semibold small",children:[e.jsx(E,{className:"me-2"}),"Documento de Identidad"]}),e.jsx("input",{type:"text",className:`form-control ${s.documento?"is-invalid":""}`,disabled:i,...n("documento",{required:"El documento es requerido",minLength:{value:4,message:"Mínimo 4 caracteres"}}),placeholder:"Ingresa tu número de documento"}),s.documento&&e.jsx("div",{className:"invalid-feedback d-block small",children:s.documento.message})]}),t&&e.jsxs("div",{className:"alert alert-danger d-flex align-items-center mb-3",children:[e.jsx("i",{className:"fas fa-exclamation-circle me-2"}),t]}),e.jsx("div",{className:"mb-3",children:e.jsx("button",{type:"submit",className:"btn w-100 border-0 student-login-button",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"me-2 fa-spin"}),"Validando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"me-2"}),"Iniciar Sesión"]})})})]}),e.jsxs("div",{className:"text-center mt-3 pt-3 border-top",children:[e.jsx("p",{className:"mb-2 text-muted small",children:"¿Problemas para acceder?"}),e.jsx("p",{className:"text-muted small mb-0",children:"Contacta a tu docente para obtener tus credenciales"})]})]})]})})})})})})]})})};export{A as default};
