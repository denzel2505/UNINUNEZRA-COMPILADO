import{r as a,j as e,b as y,A as w,S as c}from"./index-D_5yPiNa.js";import{F as g,a as D,g as G,f as T,b as S,c as E,d as P,e as _}from"./index-BCRNc57j.js";import"./iconBase-DP8UkxFN.js";const K=()=>{const[p,C]=a.useState(""),[N,F]=a.useState(""),[h,I]=a.useState(""),[u,z]=a.useState(""),[b,A]=a.useState(""),[x,k]=a.useState(""),[i,v]=a.useState([]),[r,n]=a.useState(!1),[j,R]=a.useState(!1),[f,q]=a.useState(!1);a.useEffect(()=>{(async()=>{try{const t=(await y(w.auth.registerProgramas)).data;let l=[];Array.isArray(t)?l=t:Array.isArray(t?.programas)?l=t.programas:Array.isArray(t?.data?.programas)&&(l=t.data.programas),v(l)}catch(o){console.error("Error cargando programas pÃºblicos:",o),v([])}})()},[]);const L=async s=>{if(s.preventDefault(),u!==b){c.fire({icon:"error",title:"Error",text:"Las contraseÃ±as no coinciden"});return}if(!h.trim()){c.fire({icon:"error",title:"Error",text:"La identificaciÃ³n es obligatoria"});return}if(i.length>0&&!x){c.fire({icon:"error",title:"Error",text:"Debes seleccionar un programa"});return}n(!0);const o=!x||i.length===0,t={nombre:p,email:N,identificacion:h,password:u,confirmar_password:b,transversal:!!o};o||(t.programa_id=Number(x));try{const l=w.auth.register,d=await y.post(l,t,{timeout:8e3}),m=d?.data??{};d.status>=200&&d.status<300&&(m?.success===!0||typeof m?.success>"u")?(n(!1),await c.fire({icon:"success",title:"Â¡Registro exitoso!",text:m?.message||"Usuario registrado correctamente",confirmButtonText:"Ir al login",allowOutsideClick:!1,allowEscapeKey:!1}),window.location.href="/login-docente"):(n(!1),await c.fire({icon:"error",title:"Error",text:m?.message||m?.error||"Error al registrar"}))}catch(l){console.error("ðŸ’¥ Error en registro:",l);const d=l?.response?.data?.message||l?.response?.data?.error;n(!1),await c.fire({icon:"error",title:"Error",text:d||"Error de red o del servidor"})}finally{n(!1)}};return e.jsx("div",{className:"vh-100 d-flex align-items-center justify-content-center bg-white",children:e.jsx("div",{className:"container-fluid px-4",children:e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-12 col-lg-10 col-xl-8",children:e.jsxs("div",{className:"row g-2",children:[e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"card shadow-lg border-0 h-100",children:[e.jsxs("div",{className:" text-white text-center py-2",style:{background:"#ff7300"},children:[e.jsx("div",{className:"mb-1",children:e.jsx("div",{className:"bg-white bg-opacity-25 rounded-circle d-inline-flex align-items-center justify-content-center",style:{width:"40px",height:"40px"},children:e.jsx(g,{size:16})})}),e.jsx("h5",{className:"mb-0 fw-bold",children:"Registro de Profesor"}),e.jsx("p",{className:"mb-0 opacity-75 small",children:"Crea tu cuenta"})]}),e.jsxs("div",{className:"card-body p-2 p-md-3",children:[e.jsxs("form",{onSubmit:L,children:[e.jsxs("div",{className:"row g-2",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"mb-2",children:[e.jsxs("label",{className:"form-label fw-semibold small",children:[e.jsx(g,{className:"me-1"}),"Nombre"]}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:p,onChange:s=>C(s.target.value),placeholder:"Juan PÃ©rez",required:!0,disabled:r})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"mb-2",children:[e.jsxs("label",{className:"form-label fw-semibold small",children:[e.jsx(D,{className:"me-1"}),"Email"]}),e.jsx("input",{type:"email",className:"form-control form-control-sm",value:N,onChange:s=>F(s.target.value),placeholder:"juan@correo.com",required:!0,disabled:r})]})})]}),e.jsxs("div",{className:"row g-2",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"mb-2",children:[e.jsxs("label",{className:"form-label fw-semibold small",children:[e.jsx(G,{className:"me-1"}),"IdentificaciÃ³n"]}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:h,onChange:s=>I(s.target.value),placeholder:"12345678",required:!0,disabled:r})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"mb-2",children:[e.jsxs("label",{className:"form-label fw-semibold small",children:[e.jsx(T,{className:"me-1"}),"Programa"]}),e.jsxs("select",{className:"form-control form-control-sm",value:x,onChange:s=>k(s.target.value),required:i.length>0,disabled:r||i.length===0,children:[e.jsx("option",{value:"",children:i.length>0?"Selecciona programa":"Inicia sesiÃ³n para ver programas"}),i.map(s=>e.jsx("option",{value:s.id,children:s.nombre},s.id))]}),i.length===0&&e.jsx("small",{className:"text-muted",children:"Este campo se habilita al iniciar sesiÃ³n."})]})})]}),e.jsxs("div",{className:"row g-2",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"mb-2",children:[e.jsxs("label",{className:"form-label fw-semibold small",children:[e.jsx(S,{className:"me-1"}),"ContraseÃ±a"]}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:j?"text":"password",className:"form-control",value:u,onChange:s=>z(s.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",required:!0,minLength:8,disabled:r}),e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>R(!j),disabled:r,children:j?e.jsx(E,{size:12}):e.jsx(P,{size:12})})]})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"mb-2",children:[e.jsxs("label",{className:"form-label fw-semibold small",children:[e.jsx(S,{className:"me-1"}),"Confirmar"]}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:f?"text":"password",className:"form-control",value:b,onChange:s=>A(s.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",required:!0,disabled:r}),e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>q(!f),disabled:r,children:f?e.jsx(E,{size:12}):e.jsx(P,{size:12})})]})]})})]}),e.jsx("div",{className:"mb-2",children:e.jsx("button",{type:"submit",className:"btn w-100 border-0 btn-sm",style:{background:"#ff7300"},disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"me-1 fa-spin"}),"Registrando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"me-1"}),"Registrarse"]})})})]}),e.jsxs("div",{className:"text-center mt-2 pt-2 border-top",children:[e.jsx("p",{className:"mb-1 text-muted small",children:"Â¿Ya tienes cuenta?"}),e.jsx("a",{href:"/login-docente",className:"btn btn-outline-secondary btn-sm4 d-inline-flex align-items-center gap-2 fw-semibold",children:"Inicia sesiÃ³n aquÃ­"})]})]})]})}),e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"row g-2 h-100",children:[e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card border-0 bg-light hover-lift h-100",children:e.jsx("div",{className:"card-body p-2 text-center",children:e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"bg-success bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-1",style:{width:"50px",height:"50px"},children:e.jsx("span",{className:"text-success",style:{fontSize:"1.2rem"},children:"ðŸŽ“"})}),e.jsx("h6",{className:"text-success mb-1",children:"Profesores"}),e.jsx("p",{className:"text-muted mb-2 small",children:"Ãšnete a nuestra plataforma educativa"}),e.jsxs("ul",{className:"list-unstyled text-start small",children:[e.jsx("li",{className:"mb-1",children:"âœ… Crear cuestionarios"}),e.jsx("li",{className:"mb-1",children:"âœ… Gestionar estudiantes"}),e.jsx("li",{className:"mb-1",children:"âœ… Revisar resultados"})]})]})})})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card border-0 bg-light hover-lift h-100",children:e.jsx("div",{className:"card-body p-2 text-center",children:e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"bg-info bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-1",style:{width:"50px",height:"50px"},children:e.jsx("span",{className:"text-info",style:{fontSize:"1.2rem"},children:"ðŸ“š"})}),e.jsx("h6",{className:"text-info mb-1",children:"Programas"}),e.jsx("p",{className:"text-muted mb-2 small",children:"Accede a programas acadÃ©micos"}),e.jsxs("ul",{className:"list-unstyled text-start small",children:[e.jsx("li",{className:"mb-1",children:"âœ… Programas disponibles"}),e.jsx("li",{className:"mb-1",children:"âœ… GestiÃ³n por facultad"}),e.jsx("li",{className:"mb-1",children:"âœ… Reportes organizados"})]})]})})})})]})})]})})})})})};export{K as default};
