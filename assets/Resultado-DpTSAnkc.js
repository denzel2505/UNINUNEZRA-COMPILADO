import{e as ee,a as J,r as f,b as R,A as k,S as te,j as e}from"./index-W0ZSjH-A.js";import{h as re,P as ne,l as ae,y as se,w as oe,D as ie,i as ce,Q as le}from"./index-DfAB-zHd.js";import{P}from"./PageTransition-DHV3GPNa.js";import{d as G,c as de,e as ue,b as me}from"./index-BNBGvJyH.js";import"./iconBase-BFfBqceE.js";const pe=()=>{const l=ee(),s=J(),r=l.id,[a,c]=f.useState(null),[u,g]=f.useState(!0),[b,y]=f.useState(null),j=f.useRef(!1),x=f.useRef(null);return f.useEffect(()=>{const p=async()=>{if(x.current){await x.current;return}if(!r||isNaN(Number(r))){y("ID de cuestionario no válido"),g(!1);return}try{let h;try{const n=localStorage.getItem("user");if(n){const d=JSON.parse(n);d&&typeof d.id<"u"&&(h=Number(d.id))}}catch{}if(!h){const n=new URLSearchParams(window.location.search),d=Number(n.get("estudianteId")||n.get("id")||"0");d>0&&(h=d)}const i=await R.post(k.ver.obtenerintento(),{cuestionario_id:Number(r),estudiante_id:h}),o=i?.data?.data??i?.data;if(!o||o.error)throw console.error("❌ Error en validación de intento:",o?.error||"No se encontró intento reciente"),new Error(o?.error||"No se encontró intento reciente");const m=await R.get(k.ver.obtenerrespuestas(o.intento_id)),_=m?.data?.data??m?.data;if(!_||_.error)throw console.error("❌ Error en validación de respuestas:",_?.error||"No se encontraron respuestas"),new Error(_?.error||"No se encontraron respuestas");const M=await R.get(k.cuestionario.resolver.preguntasOpciones(r)),I=M?.data?.data??M?.data,z=n=>{if(Array.isArray(n))return n;if(!n&&n!==0)return[];if(typeof n=="string"){try{const d=JSON.parse(n);return z(d)}catch{}return[]}if(typeof n=="object"){const d=[n?.data,n?.respuestas,n?.data?.respuestas,n?.lista,n?.items];for(const v of d){const S=z(v);if(S.length>0)return S}try{const v=Object.values(n);return Array.isArray(v)?v:[]}catch{return[]}}return[]};if(typeof _=="string"&&_.includes("Fatal error")){import.meta?.env?.MODE,y("Error en el servidor: No se pudieron cargar las respuestas");return}const A=_?.data||z(_),q=await R.get(`${k.ver.obtener(r)}`),L=q?.data?.data??q?.data,w=L?.cuestionario||L||{};let F="Estudiante";if(h)try{const n=localStorage.getItem("user");if(n){const d=JSON.parse(n);d&&d.nombre&&(F=d.nombre)}}catch{}const Z=new Map;Array.isArray(I)&&I.forEach(n=>{Z.set(n.id,{imagen_pregunta:n.imagen_pregunta,opciones:n.opciones||[]})});const W=new Map;(A||[]).forEach(n=>{W.set(Number(n.pregunta_id),n)});const Q=Array.isArray(I)?I.length:0;let O=0;const X=(Array.isArray(I)?I:[]).map(n=>{const d=Number(n.id??n.pregunta_id),v=W.get(d),S=v?.id_opcion_seleccionada??null,U=n.opciones||[],V=S!=null?U.find(B=>Number(B.id??B.opcion_id)===Number(S)):void 0,H=U.find(B=>!!B.es_correcta),Y=!!v?.es_correcta;return Y&&O++,{pregunta_id:d,texto_pregunta:n.texto_pregunta??v?.texto_pregunta??"",orden_pregunta:n.orden_pregunta??0,peso_pregunta:Number(n.peso_pregunta??v?.peso_pregunta??0)||0,imagen_pregunta:n.imagen_pregunta??v?.imagen_pregunta,opcion_seleccionada_id:S,respuesta_usuario:V?.texto_opcion||"",imagen_respuesta_usuario:V?.imagen_opcion||void 0,usuario_correcto:Y,respuesta_correcta:H?.texto_opcion||"",imagen_respuesta_correcta:H?.imagen_opcion||void 0}}),K={cuestionario_id:Number(r),titulo:w?.titulo||"Cuestionario",descripcion:w?.descripcion||"",creador_nombre:w?.creador_nombre||"",programa_nombre:w?.programa_nombre||"",nivel_nombre:w?.nivel_nombre||"",campus_nombre:w?.campus_nombre||"",estudiante_id:Number(h)||0,estudiante_nombre:F,total_respondidas:Array.isArray(A)?A.length:0,total_preguntas:Q,respuestas_correctas:O,puntaje_total:Number(o.puntaje_total)||0,puntaje_obtenido:Number(o.puntaje_obtenido)||0,porcentaje:Number(o.porcentaje)||0,fecha_completado:o.fecha_respuesta||new Date().toISOString(),detalles:X};c(K)}catch(h){y(h instanceof Error?h.message:"Error al cargar los resultados")}finally{g(!1)}};j.current||(j.current=!0,x.current=p().finally(()=>{x.current=null}))},[r]),{resultado:a,isLoading:u,error:b,getImageUrl:()=>"",getPorcentajeColor:p=>p>=80?"#22c55e":p>=70?"#16a34a":p>=60?"#f59e0b":p>=50?"#f97316":"#ef4444",getPorcentajeTexto:p=>p>=70?"¡Excelente trabajo! Has aprobado el cuestionario.":p>=50?"Buen intento. Puedes mejorar revisando las respuestas incorrectas.":"Necesitas estudiar más el tema. Revisa las respuestas correctas.",getPorcentajeIcono:p=>p>=70?"success":p>=50?"warning":"danger",handleImprimir:()=>window.print(),handleCerrar:async()=>{if((await te.fire({title:"¿Cerrar sesión?",text:"Se cerrará tu sesión de estudiante",icon:"question",showCancelButton:!0,confirmButtonText:"Sí, cerrar",cancelButtonText:"Cancelar"})).isConfirmed){try{await R.post(k.estudiante.logout,{})}catch{}s("/")}}}},ge="_container_1fva4_2",fe="_loadingContainer_1fva4_8",xe="_loadingTitle_1fva4_16",he="_topHeader_1fva4_23",be="_topHeaderTitle_1fva4_29",_e="_buttonGroup_1fva4_35",ve="_dashboardButton_1fva4_40",je="_headerContent_1fva4_84",ye="_headerTitle_1fva4_93",Ne="_infoContent_1fva4_97",Ce="_unifiedCard_1fva4_107",Ie="_headerSection_1fva4_115",we="_trophyIcon_1fva4_128",Se="_headerSubtitle_1fva4_136",Te="_infoSection_1fva4_142",Re="_infoItem_1fva4_153",ke="_metricCard_1fva4_163",Ee="_metricCardRed_1fva4_169",Be="_metricIcon_1fva4_175",Pe="_metricLabel_1fva4_181",$e="_metricValue_1fva4_188",ze="_percentageCircle_1fva4_195",Ae="_percentageInner_1fva4_210",De="_percentageText_1fva4_221",Me="_alertDanger_1fva4_228",qe="_alertSuccess_1fva4_235",Le="_alertIcon_1fva4_242",Fe="_alertText_1fva4_247",We="_questionBadge_1fva4_279",Oe="_questionText_1fva4_288",Ue="_answerLabel_1fva4_302",Ve="_answerBox_1fva4_308",He="_questionImageResponsive_1fva4_339",Ye="_answerImageResponsive_1fva4_353",Ge="_imageContainer_1fva4_394",Je="_printButton_1fva4_403",Ze="_printIcon_1fva4_418",t={container:ge,loadingContainer:fe,loadingTitle:xe,topHeader:he,topHeaderTitle:be,buttonGroup:_e,dashboardButton:ve,headerContent:je,headerTitle:ye,infoContent:Ne,unifiedCard:Ce,headerSection:Ie,trophyIcon:we,headerSubtitle:Se,infoSection:Te,infoItem:Re,metricCard:ke,metricCardRed:Ee,metricIcon:Be,metricLabel:Pe,metricValue:$e,percentageCircle:ze,percentageInner:Ae,percentageText:De,alertDanger:Me,alertSuccess:qe,alertIcon:Le,alertText:Fe,questionBadge:We,questionText:Oe,answerLabel:Ue,answerBox:Ve,questionImageResponsive:He,answerImageResponsive:Ye,imageContainer:Ge,printButton:Je,printIcon:Ze},Qe=({detalle:l,questionNumber:s,toImageSrc:r,onOpenImage:a})=>e.jsx("div",{className:"card border-1",style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 15px rgba(0,0,0,0.03)",border:"1px solid #e2e8f0"},children:e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3 pb-3",style:{borderBottom:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{fontWeight:"600",color:"#0f172a"},children:["Pregunta ",s]}),e.jsxs("div",{className:t.questionBadge,children:["Peso: ",l.peso_pregunta]})]}),e.jsx("div",{className:`mb-3 pb-3 ${t.questionText}`,children:l.texto_pregunta}),l.imagen_pregunta&&e.jsx("div",{className:`mb-3 pb-3 ${t.imageContainer}`,children:e.jsx("img",{src:r(l.imagen_pregunta)||"",alt:"Imagen de la pregunta",className:t.questionImageResponsive,onClick:()=>a(r(l.imagen_pregunta)||""),style:{cursor:"pointer"},title:"Click para ampliar imagen"})}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:`mb-2 ${t.answerLabel}`,children:"TU RESPUESTA:"}),e.jsxs("div",{className:t.answerBox,children:[l.respuesta_usuario&&String(l.respuesta_usuario).trim()!==""?l.respuesta_usuario:"No respondida",l.imagen_respuesta_usuario&&String(l.respuesta_usuario||"").trim()!==""&&e.jsx("div",{className:`mt-2 ${t.imageContainer}`,children:e.jsx("img",{src:r(l.imagen_respuesta_usuario)||"",alt:"Imagen de tu respuesta",className:t.answerImageResponsive,onClick:()=>a(r(l.imagen_respuesta_usuario)||""),style:{cursor:"pointer"},title:"Click para ampliar imagen"})})]})]})]})}),Xe=({currentPage:l,totalPages:s,onPrev:r,onNext:a})=>s<=1?null:e.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-3 flex-wrap gap-2",children:[e.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:r,disabled:l===1,children:"Anterior"}),e.jsxs("div",{className:"d-flex align-items-center gap-2",style:{fontSize:"0.95rem",color:"#334155"},children:[e.jsx("span",{children:"Página"}),e.jsx("strong",{children:l}),e.jsx("span",{children:"de"}),e.jsx("strong",{children:s})]}),e.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:a,disabled:l===s,children:"Siguiente"})]}),Ke=({src:l,onClose:s})=>l?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:s,children:e.jsxs("div",{style:{position:"relative",width:"95vw",height:"90vh",background:"white",borderRadius:16,boxShadow:"0 25px 50px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",overflow:"hidden"},onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid #e2e8f0",background:"#1f2937",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:e.jsx("h3",{style:{margin:0,color:"#ffffff",fontSize:"1.1rem",fontWeight:600},children:"Ampliar Imagen"})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("button",{onClick:()=>{const r=document.querySelector('img[alt="Imagen ampliada"]'),a=document.querySelector('input[type="range"]');if(r&&a){const c=Math.min(3,parseFloat(a.value)+.2);r.style.transform=`scale(${c})`,a.value=c.toString();const u=document.getElementById("zoom-value");u&&(u.textContent=`${Math.round(c*100)}%`)}},style:{background:"#3b82f6",color:"white",border:"none",borderRadius:8,padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:14,fontWeight:500,display:"flex",alignItems:"center",gap:"0.25rem"},title:"Acercar (Zoom In)",type:"button",children:e.jsx(G,{})}),e.jsx("button",{onClick:()=>{const r=document.querySelector('img[alt="Imagen ampliada"]'),a=document.querySelector('input[type="range"]');if(r&&a){const c=Math.max(.5,parseFloat(a.value)-.2);r.style.transform=`scale(${c})`,a.value=c.toString();const u=document.getElementById("zoom-value");u&&(u.textContent=`${Math.round(c*100)}%`)}},style:{background:"#ef4444",color:"white",border:"none",borderRadius:8,padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:14,fontWeight:500,display:"flex",alignItems:"center",gap:"0.25rem"},title:"Alejar (Zoom Out)",type:"button",children:e.jsx(de,{})}),e.jsxs("button",{onClick:()=>{const r=document.querySelector('img[alt="Imagen ampliada"]'),a=document.querySelector('input[type="range"]'),c=document.querySelector("[data-image-container]");if(r&&a&&c){r.style.transform="scale(1)",a.value="1",c.scrollLeft=0,c.scrollTop=0;const u=document.getElementById("zoom-value");u&&(u.textContent="100%")}},style:{background:"#10b981",color:"white",border:"none",borderRadius:8,padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:14,fontWeight:500,display:"flex",alignItems:"center",gap:"0.25rem"},title:"Ajustar a ventana",type:"button",children:[e.jsx(ue,{})," Ajustar"]}),e.jsx("button",{onClick:s,style:{background:"rgba(255,255,255,0.2)",color:"white",border:"none",borderRadius:8,padding:"0.5rem",cursor:"pointer",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",width:40,height:40},title:"Cerrar (ESC)",type:"button",children:e.jsx(me,{})})]})]}),e.jsx("div",{"data-image-container":!0,style:{flex:1,overflow:"auto",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(45deg, #f1f5f9 25%, transparent 25%), linear-gradient(-45deg, #f1f5f9 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #f1f5f9 75%), linear-gradient(-45deg, transparent 75%, #f1f5f9 75%)",backgroundSize:"20px 20px",backgroundPosition:"0 0, 0 10px, 10px -10px, -10px 0px",padding:"2rem",cursor:"grab",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",position:"relative"},onMouseDown:r=>{r.preventDefault();const a=r.currentTarget;let c=!0,u=r.clientX,g=r.clientY,b=a.scrollLeft,y=a.scrollTop;a.style.cursor="grabbing";const j=N=>{if(!c)return;N.preventDefault();const C=N.clientX-u,T=N.clientY-g;a.scrollLeft=b-C,a.scrollTop=y-T},x=()=>{c=!1,a.style.cursor="grab",document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",x)};document.addEventListener("mousemove",j),document.addEventListener("mouseup",x)},onWheel:r=>{r.preventDefault();const a=document.querySelector('img[alt="Imagen ampliada"]'),c=document.querySelector('input[type="range"]');if(a&&c){const u=r.deltaY>0?-.1:.1,g=Math.max(.5,Math.min(3,parseFloat(c.value)+u));a.style.transform=`scale(${g})`,c.value=g.toString();const b=document.getElementById("zoom-value");b&&(b.textContent=`${Math.round(g*100)}%`)}},onDragStart:r=>r.preventDefault(),children:e.jsx("img",{src:l||"",alt:"Imagen ampliada",style:{maxWidth:"none",maxHeight:"none",width:"auto",height:"auto",objectFit:"contain",borderRadius:12,display:"block",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",pointerEvents:"none",WebkitTouchCallout:"none",boxShadow:"0 8px 32px rgba(0,0,0,0.2)",transition:"transform 0.1s ease-out"},draggable:!1,onDragStart:r=>r.preventDefault()})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",padding:"1rem 1.5rem",background:"#f8fafc",borderTop:"1px solid #e2e8f0"},children:e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6,fontSize:"14px",fontWeight:600,color:"#374151",minWidth:"60px"},children:[e.jsx(G,{})," Zoom:"]}),e.jsx("span",{id:"zoom-value",style:{fontSize:"13px",fontWeight:500,color:"#6366f1",minWidth:"40px",textAlign:"center"},children:"100%"}),e.jsx("input",{type:"range",min:"0.5",max:"3",step:"0.1",defaultValue:"1",style:{width:"200px",height:"8px",borderRadius:"4px",background:"linear-gradient(to right, #e2e8f0 0%, #6366f1 50%, #e2e8f0 100%)",outline:"none",cursor:"pointer",WebkitAppearance:"none",appearance:"none"},onChange:r=>{const a=document.querySelector('img[alt="Imagen ampliada"]'),c=document.getElementById("zoom-value");a&&c&&(a.style.transform=`scale(${r.target.value})`,c.textContent=`${Math.round(parseFloat(r.target.value)*100)}%`)}})]})})})]})}):null,st=()=>{const l=J(),{resultado:s,isLoading:r,error:a,getPorcentajeColor:c,handleImprimir:u}=pe(),[g,b]=f.useState(null),[y,j]=f.useState(1),x=5,N=f.useRef(null),C=f.useRef(0);f.useEffect(()=>{const i=o=>{o.key==="Escape"&&g&&b(null)};return g&&(C.current=window.scrollY||window.pageYOffset||0,document.addEventListener("keydown",i),document.body.style.position="fixed",document.body.style.top=`-${C.current}px`,document.body.style.width="100%"),()=>{document.removeEventListener("keydown",i);const o=Math.abs(parseInt(document.body.style.top||"0",10))||C.current;document.body.style.position="",document.body.style.top="",document.body.style.width="";const m=document.documentElement,_=m.style.scrollBehavior;m.style.scrollBehavior="auto",requestAnimationFrame(()=>{window.scrollTo(0,o),m.style.scrollBehavior=_||""})}},[g]),f.useEffect(()=>{j(1)},[s?.detalles?.length]);const T=()=>{try{N.current?N.current.scrollIntoView({behavior:"smooth",block:"start"}):window.scrollTo({top:0,behavior:"smooth"})}catch{window.scrollTo(0,0)}},D=i=>{if(!i)return null;const o=String(i).trim();if(!o)return null;if(/^data:image\//i.test(o))return o;let m="png";return o.startsWith("/9j")?m="jpeg":o.startsWith("iVBOR")?m="png":o.startsWith("R0lG")?m="gif":o.startsWith("UklGR")?m="webp":o.startsWith("Qk")?m="bmp":(o.startsWith("PHN2Zy")||o.startsWith("PD94"))&&(m="svg+xml"),`data:image/${m};base64,${o}`};if(r)return e.jsx(P,{children:e.jsx("div",{className:t.loadingContainer,children:e.jsx("div",{className:"text-center",children:e.jsx("h2",{className:t.loadingTitle,children:"Cargando resultados..."})})})});if(a)return e.jsx(P,{children:e.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{minHeight:"60vh",padding:"2rem"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{style:{color:"#ef4444",fontSize:"1.5rem",marginBottom:"1rem"},children:"Error"}),e.jsx("p",{children:a})]})})});if(!s)return e.jsx(P,{children:e.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{minHeight:"60vh",padding:"2rem"},children:e.jsx("div",{className:"text-center",children:e.jsx("h2",{style:{color:"#ef4444",fontSize:"1.5rem",marginBottom:"1rem"},children:"Resultados no encontrados"})})})});const $=Math.max(1,Math.ceil((s?.detalles?.length||0)/x)),E=(y-1)*x,p=E+x,h=(s?.detalles||[]).slice(E,p);return e.jsx(P,{children:e.jsxs("div",{className:`container-fluid py-3 ${t.container}`,children:[e.jsx("div",{className:"row justify-content-center",children:e.jsxs("div",{className:"col-12 col-xl-10",children:[e.jsxs("div",{className:`d-flex justify-content-between align-items-center mb-4 p-3 ${t.topHeader}`,children:[e.jsx("h1",{className:`text-white ${t.topHeaderTitle}`,children:"Resultados del Cuestionario"}),e.jsx("div",{className:t.buttonGroup,children:e.jsxs("button",{onClick:()=>l("/dashboard"),className:`btn btn-secondary btn-sm ${t.dashboardButton}`,children:[e.jsx(re,{})," Dashboard"]})})]}),e.jsxs("div",{className:`card border-0 mb-4 ${t.unifiedCard}`,children:[e.jsxs("div",{className:`card-body p-4 text-center ${t.headerSection}`,children:[e.jsxs("div",{className:t.headerContent,children:[e.jsx(ne,{className:t.trophyIcon}),e.jsx("h2",{className:`mb-0 font-weight-bold ${t.headerTitle}`,children:"Resumen del Cuestionario"})]}),e.jsx("div",{className:t.headerSubtitle,children:s.titulo||"Cuestionario"})]}),e.jsx("div",{className:`card-body p-4 ${t.infoSection}`,children:e.jsxs("div",{className:t.infoContent,children:[e.jsxs("div",{children:[e.jsxs("div",{className:t.infoItem,children:[e.jsxs("strong",{children:[e.jsx("i",{className:"fas fa-user"})," Resuelto por:"]})," ",s.estudiante_nombre||"Estudiante"]}),e.jsxs("div",{className:t.infoItem,children:[e.jsxs("strong",{children:[e.jsx("i",{className:"fas fa-user-tie"})," Creado por:"]})," ",s.creador_nombre||"Docente"]}),e.jsxs("div",{className:t.infoItem,children:[e.jsxs("strong",{children:[e.jsx("i",{className:"fas fa-calendar-check"})," Completado el:"]})," ",s.fecha_completado]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:t.infoItem,children:[e.jsxs("strong",{children:[e.jsx("i",{className:"fas fa-graduation-cap"})," Programa:"]})," ",s.programa_nombre||"Programa"," - ",s.nivel_nombre||"Nivel"]}),e.jsxs("div",{className:t.infoItem,children:[e.jsxs("strong",{children:[e.jsx("i",{className:"fas fa-building"})," Campus:"]})," ",s.campus_nombre||"Campus"]})]})]})}),e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-12 col-md-4",children:e.jsx("div",{className:`card border-1 h-100 ${t.metricCard}`,children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("div",{className:t.metricIcon,children:e.jsx(ae,{})}),e.jsx("div",{className:t.metricLabel,children:"PUNTAJE"}),e.jsxs("div",{className:t.metricValue,children:[s.puntaje_obtenido.toFixed(2),"/",s.puntaje_total.toFixed(2)]})]})})}),e.jsx("div",{className:"col-12 col-md-4",children:e.jsx("div",{className:`card border-1 h-100 ${t.metricCardRed}`,children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("div",{className:"mb-2",children:e.jsxs("div",{className:t.percentageCircle,style:{background:`conic-gradient(${c(s.porcentaje)} 0deg ${s.porcentaje*3.6}deg, #e5e7eb ${s.porcentaje*3.6}deg 360deg)`},children:[e.jsx("div",{className:t.percentageInner}),e.jsxs("span",{className:t.percentageText,children:[s.porcentaje,"%"]})]})}),e.jsx("div",{className:t.metricLabel,children:"PORCENTAJE"})]})})}),e.jsx("div",{className:"col-12 col-md-4",children:e.jsx("div",{className:`card border-1 h-100 ${t.metricCard}`,children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("div",{className:t.metricIcon,children:e.jsx(se,{})}),e.jsx("div",{className:t.metricLabel,children:"PREGUNTAS"}),e.jsx("div",{className:t.metricValue,children:s.total_preguntas})]})})})]}),s.porcentaje<60&&e.jsxs("div",{className:`alert alert-danger d-flex align-items-center mt-3 ${t.alertDanger}`,children:[e.jsx("div",{className:t.alertIcon,children:e.jsx(oe,{})}),e.jsx("div",{className:t.alertText,children:"Necesitas estudiar más el tema. Revisa las respuestas."})]}),s.porcentaje>=60&&e.jsxs("div",{className:`alert alert-success d-flex align-items-center mt-3 ${t.alertSuccess}`,children:[e.jsx("div",{className:t.alertIcon,children:e.jsx(ie,{})}),e.jsx("div",{className:t.alertText,children:"Excelente, has superado el cuestionario."})]})]})]}),e.jsxs("div",{className:"mb-4",ref:N,children:[e.jsxs("div",{className:"d-flex align-items-center gap-3 mb-4",children:[e.jsx("div",{style:{fontSize:"1.5rem"},children:e.jsx(ce,{})}),e.jsx("h3",{className:"mb-0",style:{fontSize:"1.5rem",fontWeight:"600",color:"#0f172a"},children:"Revisión de Respuestas"})]}),e.jsx("div",{className:"d-flex flex-column gap-5",children:h.map((i,o)=>e.jsx(Qe,{detalle:i,questionNumber:E+o+1,toImageSrc:D,onOpenImage:m=>b(m)},i.pregunta_id))}),e.jsx(Xe,{currentPage:y,totalPages:$,onPrev:()=>{j(i=>Math.max(1,i-1)),T()},onNext:()=>{j(i=>Math.min($,i+1)),T()}})]}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:u,className:`btn btn-outline-secondary btn-lg ${t.printButton}`,onMouseOver:i=>{i.currentTarget.style.backgroundColor=" #00a19B",i.currentTarget.style.color="white",i.currentTarget.style.transform="translateY(-2px)",i.currentTarget.style.boxShadow="0 8px 30px rgba(0,0,0,0.06)"},onMouseOut:i=>{i.currentTarget.style.backgroundColor="transparent",i.currentTarget.style.color="#00a19B",i.currentTarget.style.transform="translateY(0)",i.currentTarget.style.boxShadow="0 4px 15px rgba(0,0,0,0.03)"},children:[e.jsx(le,{className:t.printIcon})," Imprimir / Guardar PDF"]})})]})}),e.jsx(Ke,{src:g,onClose:()=>b(null)})]})})};export{st as default};
