import{e as Q,a as Y,r as _,b as k,A as E,S as K,j as e}from"./index-DMCNFzKN.js";import{h as ee,N as te,l as re,y as ne,v as se,C as ae,i as oe,O as ie}from"./index-3Pp9WEVo.js";import{P as $}from"./PageTransition-BtYAuUMO.js";import{d as H,c as ce,e as le,b as de}from"./index-z02uUzJu.js";import"./iconBase-D9d8KM2X.js";const ue=()=>{const l=Q(),a=Y(),r=l.id,[s,c]=_.useState(null),[m,x]=_.useState(!0),[f,v]=_.useState(null);return _.useEffect(()=>{(async()=>{if(!r||isNaN(Number(r))){v("ID de cuestionario no v√°lido"),x(!1);return}try{let g;try{const n=localStorage.getItem("user");if(n){const u=JSON.parse(n);u&&typeof u.id<"u"&&(g=Number(u.id))}}catch{}if(!g){const n=new URLSearchParams(window.location.search),u=Number(n.get("estudianteId")||n.get("id")||"0");u>0&&(g=u)}console.log("üîç Obteniendo intento m√°s reciente para cuestionario_id:",r,"estudiante_id:",g);const R=await k.post(E.ver.obtenerintento(),{cuestionario_id:Number(r),estudiante_id:g}),h=R?.data?.data??R?.data;if(console.log("üîç Respuesta completa del servidor (intento):",R.data),!h||h.error)throw console.error("‚ùå Error en validaci√≥n de intento:",h?.error||"No se encontr√≥ intento reciente"),new Error(h?.error||"No se encontr√≥ intento reciente");console.log("üîç Obteniendo respuestas para intento_id:",h.intento_id);const o=await k.get(E.ver.obtenerrespuestas(h.intento_id)),i=o?.data?.data??o?.data;if(console.log("üîç Respuesta completa del servidor (respuestas):",o.data),!i||i.error)throw console.error("‚ùå Error en validaci√≥n de respuestas:",i?.error||"No se encontraron respuestas"),new Error(i?.error||"No se encontraron respuestas");console.log("üîç Obteniendo preguntas y opciones con im√°genes para cuestionario_id:",r);const d=await k.get(E.cuestionario.resolver.preguntasOpciones(r)),y=d?.data?.data??d?.data;console.log("üîç Respuesta completa del servidor (preguntas-opciones):",d.data);const P=n=>{if(Array.isArray(n))return n;if(!n&&n!==0)return[];if(typeof n=="string"){try{const u=JSON.parse(n);return P(u)}catch{}return[]}if(typeof n=="object"){const u=[n?.data,n?.respuestas,n?.data?.respuestas,n?.lista,n?.items];for(const b of u){const S=P(b);if(S.length>0)return S}try{const b=Object.values(n);return Array.isArray(b)?b:[]}catch{return[]}}return[]};if(typeof i=="string"&&i.includes("Fatal error")){import.meta?.env?.MODE!=="production"&&console.log("[resultado/respuestas] Error del backend detectado:",i.substring(0,200)),v("Error en el servidor: No se pudieron cargar las respuestas");return}const z=i?.data||P(i),M=await k.get(`${E.ver.obtener(r)}`),D=M?.data?.data??M?.data,w=D?.cuestionario||D||{};let q="Estudiante";if(g)try{const n=localStorage.getItem("user");if(n){const u=JSON.parse(n);u&&u.nombre&&(q=u.nombre)}}catch(n){console.log("No se pudo obtener el nombre del estudiante desde localStorage:",n)}const G=new Map;Array.isArray(y)&&y.forEach(n=>{G.set(n.id,{imagen_pregunta:n.imagen_pregunta,opciones:n.opciones||[]})});const L=new Map;(z||[]).forEach(n=>{L.set(Number(n.pregunta_id),n)});const J=Array.isArray(y)?y.length:0;let W=0;const Z=(Array.isArray(y)?y:[]).map(n=>{const u=Number(n.id??n.pregunta_id),b=L.get(u),S=b?.id_opcion_seleccionada??null,F=n.opciones||[],O=S!=null?F.find(B=>Number(B.id??B.opcion_id)===Number(S)):void 0,U=F.find(B=>!!B.es_correcta),V=!!b?.es_correcta;return V&&W++,{pregunta_id:u,texto_pregunta:n.texto_pregunta??b?.texto_pregunta??"",orden_pregunta:n.orden_pregunta??0,peso_pregunta:Number(n.peso_pregunta??b?.peso_pregunta??0)||0,imagen_pregunta:n.imagen_pregunta??b?.imagen_pregunta,opcion_seleccionada_id:S,respuesta_usuario:O?.texto_opcion||"",imagen_respuesta_usuario:O?.imagen_opcion||void 0,usuario_correcto:V,respuesta_correcta:U?.texto_opcion||"",imagen_respuesta_correcta:U?.imagen_opcion||void 0}}),X={cuestionario_id:Number(r),titulo:w?.titulo||"Cuestionario",descripcion:w?.descripcion||"",creador_nombre:w?.creador_nombre||"",programa_nombre:w?.programa_nombre||"",nivel_nombre:w?.nivel_nombre||"",campus_nombre:w?.campus_nombre||"",estudiante_id:Number(g)||0,estudiante_nombre:q,total_respondidas:Array.isArray(z)?z.length:0,total_preguntas:J,respuestas_correctas:W,puntaje_total:Number(h.puntaje_total)||0,puntaje_obtenido:Number(h.puntaje_obtenido)||0,porcentaje:Number(h.porcentaje)||0,fecha_completado:h.fecha_respuesta||new Date().toISOString(),detalles:Z};c(X)}catch(g){v(g instanceof Error?g.message:"Error al cargar los resultados")}finally{x(!1)}})()},[r]),{resultado:s,isLoading:m,error:f,getImageUrl:()=>"",getPorcentajeColor:p=>p>=80?"#22c55e":p>=70?"#16a34a":p>=60?"#f59e0b":p>=50?"#f97316":"#ef4444",getPorcentajeTexto:p=>p>=70?"¬°Excelente trabajo! Has aprobado el cuestionario.":p>=50?"Buen intento. Puedes mejorar revisando las respuestas incorrectas.":"Necesitas estudiar m√°s el tema. Revisa las respuestas correctas.",getPorcentajeIcono:p=>p>=70?"success":p>=50?"warning":"danger",handleImprimir:()=>window.print(),handleCerrar:async()=>{if((await K.fire({title:"¬øCerrar sesi√≥n?",text:"Se cerrar√° tu sesi√≥n de estudiante",icon:"question",showCancelButton:!0,confirmButtonText:"S√≠, cerrar",cancelButtonText:"Cancelar"})).isConfirmed){try{await k.post(E.estudiante.logout,{})}catch{}a("/")}}}},me="_container_1r11v_2",pe="_loadingContainer_1r11v_8",ge="_loadingTitle_1r11v_16",xe="_topHeader_1r11v_23",he="_topHeaderTitle_1r11v_29",fe="_buttonGroup_1r11v_35",be="_dashboardButton_1r11v_40",_e="_headerContent_1r11v_84",ve="_headerTitle_1r11v_93",je="_infoContent_1r11v_97",ye="_unifiedCard_1r11v_107",Ne="_headerSection_1r11v_115",Ce="_trophyIcon_1r11v_128",Ie="_headerSubtitle_1r11v_136",we="_infoSection_1r11v_142",Se="_infoItem_1r11v_153",Te="_metricCard_1r11v_163",Re="_metricCardRed_1r11v_169",ke="_metricIcon_1r11v_175",Ee="_metricLabel_1r11v_181",Be="_metricValue_1r11v_188",$e="_percentageCircle_1r11v_195",Pe="_percentageInner_1r11v_210",ze="_percentageText_1r11v_221",Ae="_alertDanger_1r11v_228",Me="_alertSuccess_1r11v_235",De="_alertIcon_1r11v_242",qe="_alertText_1r11v_247",Le="_questionBadge_1r11v_279",We="_questionText_1r11v_288",Fe="_answerLabel_1r11v_302",Oe="_answerBox_1r11v_308",Ue="_questionImageResponsive_1r11v_339",Ve="_answerImageResponsive_1r11v_353",He="_imageContainer_1r11v_394",Ye="_printButton_1r11v_403",Ge="_printIcon_1r11v_418",t={container:me,loadingContainer:pe,loadingTitle:ge,topHeader:xe,topHeaderTitle:he,buttonGroup:fe,dashboardButton:be,headerContent:_e,headerTitle:ve,infoContent:je,unifiedCard:ye,headerSection:Ne,trophyIcon:Ce,headerSubtitle:Ie,infoSection:we,infoItem:Se,metricCard:Te,metricCardRed:Re,metricIcon:ke,metricLabel:Ee,metricValue:Be,percentageCircle:$e,percentageInner:Pe,percentageText:ze,alertDanger:Ae,alertSuccess:Me,alertIcon:De,alertText:qe,questionBadge:Le,questionText:We,answerLabel:Fe,answerBox:Oe,questionImageResponsive:Ue,answerImageResponsive:Ve,imageContainer:He,printButton:Ye,printIcon:Ge},Je=({detalle:l,questionNumber:a,toImageSrc:r,onOpenImage:s})=>e.jsx("div",{className:"card border-1",style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 15px rgba(0,0,0,0.03)",border:"1px solid #e2e8f0"},children:e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3 pb-3",style:{borderBottom:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{fontWeight:"600",color:"#0f172a"},children:["Pregunta ",a]}),e.jsxs("div",{className:t.questionBadge,children:["Peso: ",l.peso_pregunta]})]}),e.jsx("div",{className:`mb-3 pb-3 ${t.questionText}`,children:l.texto_pregunta}),l.imagen_pregunta&&e.jsx("div",{className:`mb-3 pb-3 ${t.imageContainer}`,children:e.jsx("img",{src:r(l.imagen_pregunta)||"",alt:"Imagen de la pregunta",className:t.questionImageResponsive,onClick:()=>s(r(l.imagen_pregunta)||""),style:{cursor:"pointer"},title:"Click para ampliar imagen"})}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:`mb-2 ${t.answerLabel}`,children:"TU RESPUESTA:"}),e.jsxs("div",{className:t.answerBox,children:[l.respuesta_usuario&&String(l.respuesta_usuario).trim()!==""?l.respuesta_usuario:"No respondida",l.imagen_respuesta_usuario&&String(l.respuesta_usuario||"").trim()!==""&&e.jsx("div",{className:`mt-2 ${t.imageContainer}`,children:e.jsx("img",{src:r(l.imagen_respuesta_usuario)||"",alt:"Imagen de tu respuesta",className:t.answerImageResponsive,onClick:()=>s(r(l.imagen_respuesta_usuario)||""),style:{cursor:"pointer"},title:"Click para ampliar imagen"})})]})]})]})}),Ze=({currentPage:l,totalPages:a,onPrev:r,onNext:s})=>a<=1?null:e.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-3 flex-wrap gap-2",children:[e.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:r,disabled:l===1,children:"Anterior"}),e.jsxs("div",{className:"d-flex align-items-center gap-2",style:{fontSize:"0.95rem",color:"#334155"},children:[e.jsx("span",{children:"P√°gina"}),e.jsx("strong",{children:l}),e.jsx("span",{children:"de"}),e.jsx("strong",{children:a})]}),e.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:s,disabled:l===a,children:"Siguiente"})]}),Xe=({src:l,onClose:a})=>l?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:a,children:e.jsxs("div",{style:{position:"relative",width:"95vw",height:"90vh",background:"white",borderRadius:16,boxShadow:"0 25px 50px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",overflow:"hidden"},onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid #e2e8f0",background:"#1f2937",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:e.jsx("h3",{style:{margin:0,color:"#ffffff",fontSize:"1.1rem",fontWeight:600},children:"Ampliar Imagen"})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("button",{onClick:()=>{const r=document.querySelector('img[alt="Imagen ampliada"]'),s=document.querySelector('input[type="range"]');if(r&&s){const c=Math.min(3,parseFloat(s.value)+.2);r.style.transform=`scale(${c})`,s.value=c.toString();const m=document.getElementById("zoom-value");m&&(m.textContent=`${Math.round(c*100)}%`)}},style:{background:"#3b82f6",color:"white",border:"none",borderRadius:8,padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:14,fontWeight:500,display:"flex",alignItems:"center",gap:"0.25rem"},title:"Acercar (Zoom In)",type:"button",children:e.jsx(H,{})}),e.jsx("button",{onClick:()=>{const r=document.querySelector('img[alt="Imagen ampliada"]'),s=document.querySelector('input[type="range"]');if(r&&s){const c=Math.max(.5,parseFloat(s.value)-.2);r.style.transform=`scale(${c})`,s.value=c.toString();const m=document.getElementById("zoom-value");m&&(m.textContent=`${Math.round(c*100)}%`)}},style:{background:"#ef4444",color:"white",border:"none",borderRadius:8,padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:14,fontWeight:500,display:"flex",alignItems:"center",gap:"0.25rem"},title:"Alejar (Zoom Out)",type:"button",children:e.jsx(ce,{})}),e.jsxs("button",{onClick:()=>{const r=document.querySelector('img[alt="Imagen ampliada"]'),s=document.querySelector('input[type="range"]'),c=document.querySelector("[data-image-container]");if(r&&s&&c){r.style.transform="scale(1)",s.value="1",c.scrollLeft=0,c.scrollTop=0;const m=document.getElementById("zoom-value");m&&(m.textContent="100%")}},style:{background:"#10b981",color:"white",border:"none",borderRadius:8,padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:14,fontWeight:500,display:"flex",alignItems:"center",gap:"0.25rem"},title:"Ajustar a ventana",type:"button",children:[e.jsx(le,{})," Ajustar"]}),e.jsx("button",{onClick:a,style:{background:"rgba(255,255,255,0.2)",color:"white",border:"none",borderRadius:8,padding:"0.5rem",cursor:"pointer",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",width:40,height:40},title:"Cerrar (ESC)",type:"button",children:e.jsx(de,{})})]})]}),e.jsx("div",{"data-image-container":!0,style:{flex:1,overflow:"auto",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(45deg, #f1f5f9 25%, transparent 25%), linear-gradient(-45deg, #f1f5f9 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #f1f5f9 75%), linear-gradient(-45deg, transparent 75%, #f1f5f9 75%)",backgroundSize:"20px 20px",backgroundPosition:"0 0, 0 10px, 10px -10px, -10px 0px",padding:"2rem",cursor:"grab",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",position:"relative"},onMouseDown:r=>{r.preventDefault();const s=r.currentTarget;let c=!0,m=r.clientX,x=r.clientY,f=s.scrollLeft,v=s.scrollTop;s.style.cursor="grabbing";const N=j=>{if(!c)return;j.preventDefault();const I=j.clientX-m,T=j.clientY-x;s.scrollLeft=f-I,s.scrollTop=v-T},C=()=>{c=!1,s.style.cursor="grab",document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",C)};document.addEventListener("mousemove",N),document.addEventListener("mouseup",C)},onWheel:r=>{r.preventDefault();const s=document.querySelector('img[alt="Imagen ampliada"]'),c=document.querySelector('input[type="range"]');if(s&&c){const m=r.deltaY>0?-.1:.1,x=Math.max(.5,Math.min(3,parseFloat(c.value)+m));s.style.transform=`scale(${x})`,c.value=x.toString();const f=document.getElementById("zoom-value");f&&(f.textContent=`${Math.round(x*100)}%`)}},onDragStart:r=>r.preventDefault(),children:e.jsx("img",{src:l||"",alt:"Imagen ampliada",style:{maxWidth:"none",maxHeight:"none",width:"auto",height:"auto",objectFit:"contain",borderRadius:12,display:"block",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",pointerEvents:"none",WebkitTouchCallout:"none",boxShadow:"0 8px 32px rgba(0,0,0,0.2)",transition:"transform 0.1s ease-out"},draggable:!1,onDragStart:r=>r.preventDefault()})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",padding:"1rem 1.5rem",background:"#f8fafc",borderTop:"1px solid #e2e8f0"},children:e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6,fontSize:"14px",fontWeight:600,color:"#374151",minWidth:"60px"},children:[e.jsx(H,{})," Zoom:"]}),e.jsx("span",{id:"zoom-value",style:{fontSize:"13px",fontWeight:500,color:"#6366f1",minWidth:"40px",textAlign:"center"},children:"100%"}),e.jsx("input",{type:"range",min:"0.5",max:"3",step:"0.1",defaultValue:"1",style:{width:"200px",height:"8px",borderRadius:"4px",background:"linear-gradient(to right, #e2e8f0 0%, #6366f1 50%, #e2e8f0 100%)",outline:"none",cursor:"pointer",WebkitAppearance:"none",appearance:"none"},onChange:r=>{const s=document.querySelector('img[alt="Imagen ampliada"]'),c=document.getElementById("zoom-value");s&&c&&(s.style.transform=`scale(${r.target.value})`,c.textContent=`${Math.round(parseFloat(r.target.value)*100)}%`)}})]})})})]})}):null,nt=()=>{const l=Y(),{resultado:a,isLoading:r,error:s,getPorcentajeColor:c,handleImprimir:m}=ue(),[x,f]=_.useState(null),[v,N]=_.useState(1),C=5,j=_.useRef(null),I=_.useRef(0);_.useEffect(()=>{const o=i=>{i.key==="Escape"&&x&&f(null)};return x&&(I.current=window.scrollY||window.pageYOffset||0,document.addEventListener("keydown",o),document.body.style.position="fixed",document.body.style.top=`-${I.current}px`,document.body.style.width="100%"),()=>{document.removeEventListener("keydown",o);const i=Math.abs(parseInt(document.body.style.top||"0",10))||I.current;document.body.style.position="",document.body.style.top="",document.body.style.width="";const d=document.documentElement,y=d.style.scrollBehavior;d.style.scrollBehavior="auto",requestAnimationFrame(()=>{window.scrollTo(0,i),d.style.scrollBehavior=y||""})}},[x]),_.useEffect(()=>{N(1)},[a?.detalles?.length]);const T=()=>{try{j.current?j.current.scrollIntoView({behavior:"smooth",block:"start"}):window.scrollTo({top:0,behavior:"smooth"})}catch{window.scrollTo(0,0)}},A=o=>{if(!o)return null;const i=String(o).trim();if(!i)return null;if(/^data:image\//i.test(i))return i;let d="png";return i.startsWith("/9j")?d="jpeg":i.startsWith("iVBOR")?d="png":i.startsWith("R0lG")?d="gif":i.startsWith("UklGR")?d="webp":i.startsWith("Qk")?d="bmp":(i.startsWith("PHN2Zy")||i.startsWith("PD94"))&&(d="svg+xml"),`data:image/${d};base64,${i}`};if(r)return e.jsx($,{children:e.jsx("div",{className:t.loadingContainer,children:e.jsx("div",{className:"text-center",children:e.jsx("h2",{className:t.loadingTitle,children:"Cargando resultados..."})})})});if(s)return e.jsx($,{children:e.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{minHeight:"60vh",padding:"2rem"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{style:{color:"#ef4444",fontSize:"1.5rem",marginBottom:"1rem"},children:"Error"}),e.jsx("p",{children:s})]})})});if(!a)return e.jsx($,{children:e.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{minHeight:"60vh",padding:"2rem"},children:e.jsx("div",{className:"text-center",children:e.jsx("h2",{style:{color:"#ef4444",fontSize:"1.5rem",marginBottom:"1rem"},children:"Resultados no encontrados"})})})});const p=Math.max(1,Math.ceil((a?.detalles?.length||0)/C)),g=(v-1)*C,R=g+C,h=(a?.detalles||[]).slice(g,R);return e.jsx($,{children:e.jsxs("div",{className:`container-fluid py-3 ${t.container}`,children:[e.jsx("div",{className:"row justify-content-center",children:e.jsxs("div",{className:"col-12 col-xl-10",children:[e.jsxs("div",{className:`d-flex justify-content-between align-items-center mb-4 p-3 ${t.topHeader}`,children:[e.jsx("h1",{className:`text-white ${t.topHeaderTitle}`,children:"Resultados del Cuestionario"}),e.jsx("div",{className:t.buttonGroup,children:e.jsxs("button",{onClick:()=>l("/dashboard"),className:`btn btn-success btn-sm ${t.dashboardButton}`,children:[e.jsx(ee,{})," Dashboard"]})})]}),e.jsxs("div",{className:`card border-0 mb-4 ${t.unifiedCard}`,children:[e.jsxs("div",{className:`card-body p-4 text-center ${t.headerSection}`,children:[e.jsxs("div",{className:t.headerContent,children:[e.jsx(te,{className:t.trophyIcon}),e.jsx("h2",{className:`mb-0 font-weight-bold ${t.headerTitle}`,children:"Resumen del Cuestionario"})]}),e.jsx("div",{className:t.headerSubtitle,children:a.titulo||"Cuestionario"})]}),e.jsx("div",{className:`card-body p-4 ${t.infoSection}`,children:e.jsxs("div",{className:t.infoContent,children:[e.jsxs("div",{children:[e.jsxs("div",{className:t.infoItem,children:[e.jsxs("strong",{children:[e.jsx("i",{className:"fas fa-user"})," Resuelto por:"]})," ",a.estudiante_nombre||"Estudiante"]}),e.jsxs("div",{className:t.infoItem,children:[e.jsxs("strong",{children:[e.jsx("i",{className:"fas fa-user-tie"})," Creado por:"]})," ",a.creador_nombre||"Docente"]}),e.jsxs("div",{className:t.infoItem,children:[e.jsxs("strong",{children:[e.jsx("i",{className:"fas fa-calendar-check"})," Completado el:"]})," ",a.fecha_completado]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:t.infoItem,children:[e.jsxs("strong",{children:[e.jsx("i",{className:"fas fa-graduation-cap"})," Programa:"]})," ",a.programa_nombre||"Programa"," - ",a.nivel_nombre||"Nivel"]}),e.jsxs("div",{className:t.infoItem,children:[e.jsxs("strong",{children:[e.jsx("i",{className:"fas fa-building"})," Campus:"]})," ",a.campus_nombre||"Campus"]})]})]})}),e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-12 col-md-4",children:e.jsx("div",{className:`card border-1 h-100 ${t.metricCard}`,children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("div",{className:t.metricIcon,children:e.jsx(re,{})}),e.jsx("div",{className:t.metricLabel,children:"PUNTAJE"}),e.jsxs("div",{className:t.metricValue,children:[a.puntaje_obtenido.toFixed(2),"/",a.puntaje_total.toFixed(2)]})]})})}),e.jsx("div",{className:"col-12 col-md-4",children:e.jsx("div",{className:`card border-1 h-100 ${t.metricCardRed}`,children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("div",{className:"mb-2",children:e.jsxs("div",{className:t.percentageCircle,style:{background:`conic-gradient(${c(a.porcentaje)} 0deg ${a.porcentaje*3.6}deg, #e5e7eb ${a.porcentaje*3.6}deg 360deg)`},children:[e.jsx("div",{className:t.percentageInner}),e.jsxs("span",{className:t.percentageText,children:[a.porcentaje,"%"]})]})}),e.jsx("div",{className:t.metricLabel,children:"PORCENTAJE"})]})})}),e.jsx("div",{className:"col-12 col-md-4",children:e.jsx("div",{className:`card border-1 h-100 ${t.metricCard}`,children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("div",{className:t.metricIcon,children:e.jsx(ne,{})}),e.jsx("div",{className:t.metricLabel,children:"PREGUNTAS"}),e.jsx("div",{className:t.metricValue,children:a.total_preguntas})]})})})]}),a.porcentaje<60&&e.jsxs("div",{className:`alert alert-danger d-flex align-items-center mt-3 ${t.alertDanger}`,children:[e.jsx("div",{className:t.alertIcon,children:e.jsx(se,{})}),e.jsx("div",{className:t.alertText,children:"Necesitas estudiar m√°s el tema. Revisa las respuestas."})]}),a.porcentaje>=60&&e.jsxs("div",{className:`alert alert-success d-flex align-items-center mt-3 ${t.alertSuccess}`,children:[e.jsx("div",{className:t.alertIcon,children:e.jsx(ae,{})}),e.jsx("div",{className:t.alertText,children:"Excelente, has superado el cuestionario."})]})]})]}),e.jsxs("div",{className:"mb-4",ref:j,children:[e.jsxs("div",{className:"d-flex align-items-center gap-3 mb-4",children:[e.jsx("div",{style:{fontSize:"1.5rem"},children:e.jsx(oe,{})}),e.jsx("h3",{className:"mb-0",style:{fontSize:"1.5rem",fontWeight:"600",color:"#0f172a"},children:"Revisi√≥n de Respuestas"})]}),e.jsx("div",{className:"d-flex flex-column gap-5",children:h.map((o,i)=>e.jsx(Je,{detalle:o,questionNumber:g+i+1,toImageSrc:A,onOpenImage:d=>f(d)},o.pregunta_id))}),e.jsx(Ze,{currentPage:v,totalPages:p,onPrev:()=>{N(o=>Math.max(1,o-1)),T()},onNext:()=>{N(o=>Math.min(p,o+1)),T()}})]}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:m,className:`btn btn-outline-secondary btn-lg ${t.printButton}`,onMouseOver:o=>{o.currentTarget.style.backgroundColor="#00a19B",o.currentTarget.style.color="white",o.currentTarget.style.transform="translateY(-2px)",o.currentTarget.style.boxShadow="0 8px 30px rgba(0,0,0,0.06)"},onMouseOut:o=>{o.currentTarget.style.backgroundColor="transparent",o.currentTarget.style.color="#00a19B",o.currentTarget.style.transform="translateY(0)",o.currentTarget.style.boxShadow="0 4px 15px rgba(0,0,0,0.03)"},children:[e.jsx(ie,{className:t.printIcon})," Imprimir / Guardar PDF"]})})]})}),e.jsx(Xe,{src:x,onClose:()=>f(null)})]})})};export{nt as default};
